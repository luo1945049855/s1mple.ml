<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>业精于勤，荒于嬉。行成于思，毁于随。</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="敏于事而慎于言">
<meta property="og:type" content="website">
<meta property="og:title" content="业精于勤，荒于嬉。行成于思，毁于随。">
<meta property="og:url" content="https://zerobit.ga/index.html">
<meta property="og:site_name" content="业精于勤，荒于嬉。行成于思，毁于随。">
<meta property="og:description" content="敏于事而慎于言">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="dayo">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="业精于勤，荒于嬉。行成于思，毁于随。" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">业精于勤，荒于嬉。行成于思，毁于随。</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://zerobit.ga"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-cpp/effective_modern_cpp" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/04/30/cpp/effective_modern_cpp/" class="article-date">
  <time datetime="2021-04-29T16:00:00.000Z" itemprop="datePublished">2021-04-30</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/CPP/">CPP</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/04/30/cpp/effective_modern_cpp/">Effective Modern CPP</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="RValue-amp-amp-LValue"><a href="#RValue-amp-amp-LValue" class="headerlink" title="RValue &amp;&amp; LValue"></a>RValue &amp;&amp; LValue</h2><ul>
<li><p><code>RValues</code> correspond to temporary objects<br><code>Lvalues</code> correspond to objects you can refer to, either by name or by following a pointer or lvalue reference.</p>
</li>
<li><p><code>LValues</code> usually can be taken address, while <code>RValues</code> can’t.</p>
</li>
<li><p>The type of an expression is independent of whether the expression is an lvalue or an rvalue.<br>A parameter of rvalue reference type, itself is an lvalue.</p>
</li>
<li><p><code>RValues</code> can’t bind to lvalue references, unless they’re lvalue-references-to-const.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> Container, <span class="keyword">typename</span> Index&gt;</span><br><span class="line"><span class="function"><span class="keyword">decltype</span>(<span class="keyword">auto</span>) <span class="title">authAndAccess</span><span class="params">(Container&amp; c, Index i)</span></span></span><br><span class="line"><span class="function"><span class="title">authAndAccess</span><span class="params">(<span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;, <span class="number">0</span>)</span></span>; <span class="comment">// compile error.</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> Container, <span class="keyword">typename</span> Index&gt;</span><br><span class="line"><span class="function"><span class="keyword">decltype</span>(<span class="keyword">auto</span>) <span class="title">authAndAccess</span><span class="params">(<span class="keyword">const</span> Container&amp; c, Index i)</span></span></span><br><span class="line"><span class="function"><span class="title">authAndAccess</span><span class="params">(<span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;, <span class="number">0</span>)</span></span>; <span class="comment">// ok.</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Reference Collapsing:<br>If either reference is an lvalue reference, the result is an lvalue reference.<br>Otherwise(i.e.,if both are rvalue reference) the result is an rvalue reference.</p>
</li>
<li><p>Reference Collapsing occurs in four contexts:</p>
</li>
</ul>
<ol>
<li><p><code>template</code> instantiation.</p>
</li>
<li><p>generation for <code>auto</code> variables.</p>
</li>
<li><p>generation and use of <code>typedef</code>s and alia declarations.</p>
</li>
<li><p>use of <code>decltype</code>.</p>
</li>
</ol>
<h2 id="Smart-Pointers"><a href="#Smart-Pointers" class="headerlink" title="Smart Pointers"></a>Smart Pointers</h2><ul>
<li><p><code>control block</code> contains:<br>reference count;<br>weak count;<br>a copy of custom deleter;<br>a copy of custom allocator;</p>
</li>
<li><p>constructing more than one std::shared_ptr from a single raw pointer, undefined behavior.<br><code>std::enable_shared_from_this&lt;T&gt;</code> which using <code>The Curiously Recurring Template Pattern(CRTP)</code> can solve this problem.</p>
</li>
<li><p>std::shared_ptr can be created from a std::unique_ptr.</p>
</li>
<li><p><code>std::shared_ptr&lt;T&gt; sp(new T[size], delete[])</code> isn’t recommended;</p>
</li>
<li><p>std::make_shared allocates <code>a single chunk of memory</code> to hold both the Widget object and the control block.</p>
</li>
<li><p>std::unique_ptr&lt;T, deleter&gt; the type of deleter is <code>part of the type</code> of the smart pointer, so pointed-to types must be complete when compiler-generated special functions.</p>
</li>
</ul>
<h2 id="Template"><a href="#Template" class="headerlink" title="Template"></a>Template</h2><ul>
<li>SFINAE(Substitution Failure Is Not An Error) &amp;&amp; std::enable_if</li>
<li>std::is_integral</li>
<li>std::is_same</li>
<li>std::decay</li>
<li>std::is_base_of</li>
<li>static_assert</li>
<li>std::is_constructible</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">template</span> &lt;</span><br><span class="line">        <span class="keyword">typename</span> T,</span><br><span class="line">        <span class="keyword">typename</span> = <span class="built_in">std</span>::<span class="keyword">enable_if_t</span>&lt;</span><br><span class="line">          !<span class="built_in">std</span>::is_base_of&lt;Person, <span class="built_in">std</span>::<span class="keyword">decay_t</span>&lt;T&gt;&gt;::value &amp;&amp; </span><br><span class="line">          !<span class="built_in">std</span>::is_integral&lt;<span class="built_in">std</span>::<span class="keyword">remove_reference_t</span>&lt;T&gt;&gt;::value</span><br><span class="line">        &gt;</span><br><span class="line">    &gt;</span><br><span class="line">    <span class="keyword">explicit</span> Person(T&amp;&amp; n) : name(<span class="built_in">std</span>::forward&lt;T&gt;(n)) &#123;</span><br><span class="line">        <span class="keyword">static_assert</span>(<span class="built_in">std</span>::is_constructible&lt;<span class="built_in">std</span>::<span class="built_in">string</span>, T&gt;::value, </span><br><span class="line">        <span class="string">&quot;Parameter n can&#x27;t be used to construct a std::string&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">explicit</span> <span class="title">Person</span><span class="params">(<span class="keyword">int</span> idx)</span></span></span><br><span class="line"><span class="function">    : <span class="title">name</span><span class="params">(nameFromIdx(idx))</span></span></span><br><span class="line"><span class="function">    </span>&#123;...&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">  <span class="built_in">std</span>::<span class="built_in">string</span> name;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<ul>
<li>Arrays and Functions can decay into pointers.</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">someFunc</span><span class="params">(<span class="keyword">int</span>, <span class="keyword">double</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">f1</span><span class="params">(T param)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">f2</span><span class="params">(T&amp; param)</span></span>;</span><br><span class="line"></span><br><span class="line">f1(someFunc); <span class="comment">// param deduced as ptr-to-func. void(*)(int, double);</span></span><br><span class="line">f2(someFunc); <span class="comment">// param deduced as ref-to-func. void(&amp;)(int, double);</span></span><br></pre></td></tr></table></figure>

<ul>
<li>Function can’t declare parameters that are truly arrays, they can declare parameters that are <code>reference to array</code> which interestingly enables creation of a template that deduces <code>the number of elements</code> that an an array contains:</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="built_in">std</span>::<span class="keyword">size_t</span> N&gt;</span><br><span class="line"><span class="function"><span class="keyword">constexpr</span> <span class="built_in">std</span>::<span class="keyword">size_t</span> <span class="title">arraySize</span><span class="params">(T (&amp;)[N])</span> <span class="keyword">noexcept</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> N;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>Alias Templates</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">typedef</span> <span class="title">void</span> <span class="params">(*FP)</span><span class="params">(<span class="keyword">int</span>, <span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span>&amp;)</span></span>;    <span class="comment">// typedef</span></span><br><span class="line"><span class="keyword">using</span> FP = <span class="keyword">void</span> (*) (<span class="keyword">int</span>, <span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span>&amp;);  <span class="comment">// alias declaration</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">using</span> MyAllocList = <span class="built_in">std</span>::<span class="built_in">list</span>&lt;T, MyAlloc&lt;T&gt;&gt;;</span><br></pre></td></tr></table></figure>

<h2 id="Perfect-Forwarding"><a href="#Perfect-Forwarding" class="headerlink" title="Perfect Forwarding"></a>Perfect Forwarding</h2><ul>
<li><p>Function templates that take arbitrary arguments and forward them to other functions such that the target functions receive <code>exactly the same</code> arguments.</p>
</li>
<li><p>RValue references should be unconditionally cast to rvalues, because they’re always bound to rvalues.<br>Universal references should be conditionally case to rvalues, because they’re only sometimes bound to rvalues.</p>
</li>
<li><p>Do the same thing for rvalue references and universal references being returned from functions that return by value.</p>
</li>
<li><p>Never apply <code>std::move</code> or <code>std::forward</code> to local objects if they would otherwise be eligible for the <code>return value optimization</code>.</p>
</li>
<li><p>Functions taking <code>universal references</code> are the greediest functions in C++.</p>
</li>
<li><p>When a <code>template instantiation</code> and <code>non-template function</code> are equally good matches for a function call, the normal function is preferred.</p>
</li>
<li><p>The kind of arguments that can’t be perfect-forwarded:</p>
<ul>
<li><p>Braced initializers.</p>
<p>A braced initializer to a function template parameter that’s not declared to be a <code>std::initializer_list</code> is decreed to be, as the Standard puts it, a “non-deduced context.”<br>Compilers are forbidden from deducing a type for the expression {1, 2, 3}, because fwd’s parameter isn’t declared to be a <code>std::initializer_list</code>.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">f</span><span class="params">(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; v)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">fwd</span><span class="params">(T&amp; v)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  f(<span class="built_in">std</span>::forward&lt;T&gt;(v));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">f (&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;);  <span class="comment">// ok.</span></span><br><span class="line">fwd(&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;); <span class="comment">// error.</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>0 or NULL as null pointers.</p>
<p>0 and NULL will be deduced to integral type(typically int).</p>
</li>
<li><p>declaration-only integral <code>static const</code> data members.</p>
<p>fwd’s parameter is a universal reference, and references, in the code generated by compilers, are usually treated like pointers.<br>In the program’s underlying binary code(and on the hardware), <code>pointers and references</code> are essentially the same thing.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Widget</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">const</span> <span class="built_in">std</span>::<span class="keyword">size_t</span> MinVals = <span class="number">28</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; widgetData;</span><br><span class="line">widgetData.reserve(Widget::MinVals); <span class="comment">// ok.</span></span><br><span class="line"></span><br><span class="line">f(Widget::MinVals);   <span class="comment">// ok.</span></span><br><span class="line">fwd(Widget::MinVals); <span class="comment">// error. link error.</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>overloaded function names and template names.</p>
<p>void f(int (*pf)(int));<br>void f(int pf(int));    // same to above.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">processVal</span><span class="params">(<span class="keyword">int</span> value)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">processVal</span><span class="params">(<span class="keyword">int</span> value, <span class="keyword">int</span> priority)</span></span>;</span><br><span class="line">fwd(processVal); <span class="comment">// error! which processVal.</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Bitfields</p>
<p>fwd’s parameter is a reference, h.totalLength is a non-const bitfield.</p>
<p>The C++ Standard: “A non-const reference shall not be bound to a bit-field.” But reference-to-const is allowed.</p>
<p>There’s no way to create a pointer to arbitrary bits(C++ dictates that the smallest thing you can point to is a char).</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">IPv4Helper</span> &#123;</span></span><br><span class="line">  <span class="built_in">std</span>::<span class="keyword">uint32_t</span> version: <span class="number">4</span>,</span><br><span class="line">                IHL: <span class="number">4</span>,</span><br><span class="line">                DSCP: <span class="number">6</span>,</span><br><span class="line">                ECN: <span class="number">2</span>,</span><br><span class="line">                totalLength: <span class="number">16</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">IPv4Helper h;</span><br><span class="line">f(h.totalLength); <span class="comment">// ok.</span></span><br><span class="line">fwd(h.totalLength); <span class="comment">// error.</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
</li>
</ul>
<h2 id="Uniform-Initialization"><a href="#Uniform-Initialization" class="headerlink" title="Uniform Initialization"></a>Uniform Initialization</h2><ul>
<li>Function calls using the braced initialization syntax <code>strongly prefer</code> the overloads taking <code>std::initializer_list</code>.</li>
<li><code>Narrowing Conversion</code> are prohibited inside braced initializers.</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Widget</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    Widget(<span class="keyword">int</span> i, <span class="keyword">bool</span> b);</span><br><span class="line">    Widget(<span class="keyword">int</span> i, <span class="keyword">double</span> d);</span><br><span class="line">    Widget(<span class="built_in">std</span>::<span class="built_in">initializer_list</span>&lt;<span class="keyword">int</span>&gt; il);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">Widget w1&#123;<span class="number">10</span>, <span class="literal">true</span>&#125;; <span class="comment">// calls std::initializer_lsit&lt;int&gt;</span></span><br><span class="line">                     <span class="comment">// (10 and true convert to int)</span></span><br><span class="line">Widget w2&#123;<span class="number">10</span>, <span class="number">5.0</span>&#125;;  <span class="comment">// error! </span></span><br><span class="line">                     <span class="comment">// narrowing conversions(5.0 can&#x27;t be exactly represented by int).</span></span><br></pre></td></tr></table></figure>

<ul>
<li>The only real difference between <code>auto</code> and <code>template</code> type deduction is that <code>auto</code> assumes that a <code>braced initializer</code> represents a <code>std::initializer_list</code>, but template type deduction doesn’t.</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">auto</span> x = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3.0</span>&#125;; <span class="comment">// error! can&#x27;t deduce T for std::initializer_list&lt;T&gt; </span></span><br><span class="line">                      <span class="comment">// because int and double are different types</span></span><br><span class="line"><span class="keyword">auto</span> x1 = &#123;<span class="number">11</span>, <span class="number">23</span>, <span class="number">9</span>&#125;; <span class="comment">// x&#x27;s type is std::initializer_list&lt;int&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">f</span><span class="params">(T param)</span></span>;</span><br><span class="line">f(&#123;<span class="number">11</span>, <span class="number">23</span>, <span class="number">9</span>&#125;); <span class="comment">// error! can&#x27;t deduce type for T</span></span><br></pre></td></tr></table></figure>

<ul>
<li>Empty braces mean no arguments, not an empty std::initializer_list.<br>Put empty braces inside <code>parentheses</code> or <code>braces</code> demarcating what you’re passing.</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Widget w1&#123;&#125;;   <span class="comment">// calls default ctor.</span></span><br><span class="line"><span class="function">Widget <span class="title">w2</span><span class="params">(&#123;&#125;)</span></span>; <span class="comment">// std::initializer_list with empty list.</span></span><br><span class="line">Widget w3&#123;&#123;&#125;&#125;; <span class="comment">// std::initializer_list with empty list.</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>std::vector&lt;number type&gt;</code> use brace initializer</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">v1</span><span class="params">(<span class="number">10</span>, <span class="number">20</span>)</span></span>; <span class="comment">// use non-std::initializer_list ctor:</span></span><br><span class="line">                             <span class="comment">// 10-element all have value of 20.</span></span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; v2&#123;<span class="number">10</span>, <span class="number">20</span>&#125;; <span class="comment">// use std::initializer_list ctor:</span></span><br><span class="line">                             <span class="comment">// 2-element values are 10, 20.</span></span><br></pre></td></tr></table></figure>

<h2 id="Special-Member-Function-Generation"><a href="#Special-Member-Function-Generation" class="headerlink" title="Special Member Function Generation"></a>Special Member Function Generation</h2><p>C++98:</p>
<ul>
<li><p>These functions are generated only if they’re needed,<br>i.e., if some code uses them without their being expressly declared in the class.</p>
</li>
<li><p>Generated special member functions are implicitly <code>public</code> and <code>inline</code> and<br><code>nonvirtual</code>(unless destructor in a derived class inheriting from a base class with a virtual destructor).</p>
</li>
<li><p>default constructor: no constructor at all(prevent constructor arguments are required)</p>
</li>
<li><p>destructor: noexcept by default. virtual only if base class destructor is virtual.</p>
<p><code>delete</code> of <code>typeid</code> on a derived class object through <code>a base class pointer</code> or <code>reference</code> yield undefined or misleading results.</p>
</li>
<li><p>copy constructor:<br>deleted if class declares a move operation.<br>generation of this function in a class with user-declared <code>copy assignment operator</code> or <code>destructor</code> is deprecated.</p>
</li>
<li><p>copy assignment:<br>deleted if class declares a move operation.<br>generation of this function in a class with user-declared <code>copy constructor</code> or <code>destructor</code> is deprecated.</p>
</li>
</ul>
<p>C++11:</p>
<ul>
<li><p>memberwise move consits of move operations on <code>data members</code><br>and <code>base classes</code> that support move operations, but a copy operation for those that don’t.</p>
</li>
<li><p>The two move operations, if you declare either, that prevents compilers from generating the other.</p>
</li>
<li><p>Move operations won’t be generated for any class that explicitly declared a copy operation.</p>
</li>
<li><p>Declaring a move operation in a class causes compilers to disable the copy operations.</p>
</li>
<li><p>User-defined destructor has no impact on compiler’s generated copy operations,<br>because that will break too much legacy code.</p>
</li>
<li><p>User-defined destructor prevents compiler from generating move operations.</p>
</li>
<li><p>Template Member Functions don’t preventing compiler from generating the special member functions.</p>
</li>
<li><p>move constructor: no copy, no move, no destructor.</p>
</li>
<li><p>move assignment: no copy, no move, no destructor.</p>
</li>
</ul>
<h2 id="Lambda-Expression"><a href="#Lambda-Expression" class="headerlink" title="Lambda Expression"></a>Lambda Expression</h2><ul>
<li><p><code>std::function</code> object typically uses more memory that auto-declared object.<br><code>std::function</code> object is almost certain to be slower that calling it via an auto-declared object.</p>
</li>
<li><p><code>std::bind</code> all arguments passed to <code>bind objects</code> are passed by reference using <code>perfect-forwarding</code>.</p>
</li>
<li><p>Each lambda causes compilers to generate a unique <code>closure class</code>(compile time).</p>
<p>By default, the <code>operator()</code> member function inside the closure class generated from a lambda is <code>const</code>.<br>If the lambda were declared <code>mutable</code>, <code>operator()</code> in its closure class would not be declared <code>const</code>.</p>
<p><code>closure object</code>(runtime) may generally be copied, so it’s possible to have multiple closures of a closure type corresponding to a single lambda.</p>
</li>
<li><p>std::all_of</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">std</span>::all_of(</span><br><span class="line">  <span class="built_in">std</span>::begin(container), <span class="built_in">std</span>::end(container), </span><br><span class="line">    [&amp;](<span class="keyword">const</span> ConstElem&amp; value) &#123; reutn value % divisor == <span class="number">0</span>; &#125;);</span><br></pre></td></tr></table></figure>
</li>
<li><p>init capture(generalized lambda capture)</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">auto</span> func = [pw = <span class="built_in">std</span>::move(pw)]() &#123;...&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>C++14 availing ourselves of the standard suffixes for seconds(s), milliseconds(ms), hours(h). These suffixes are implemented in the <code>std::literals</code> namespace.</p>
</li>
</ul>
<h2 id="Concurrency-API"><a href="#Concurrency-API" class="headerlink" title="Concurrency API"></a>Concurrency API</h2><ul>
<li><p>Hardware threads: CPU threads.<br>Software threads: OS threads(System threads).<br>std::threads: objects in a C++ process.</p>
<p>When there are more ready-to-run <code>software threads</code> than <code>hardware threads</code>, the <code>thread scheduler(OS)</code> time-slices the software threads on the hardware.</p>
<p><code>Context Switches</code> increase the overall thread management overhead of the system.</p>
<p>They can be particularly costly when the <code>hardware thread</code> on which a <code>software thread</code> is scheduled<br>is on a <code>different core</code> that was the case for the software thread during its <code>last time-slice</code> because of <code>CPU caches</code>.</p>
</li>
<li><p><code>std::future</code> can get return value of an async task, even <code>exception</code> can be get access to.</p>
<p><code>std::launch::deferred</code> launch policy means that f may run only when <code>get</code> or <code>wait</code> is called on the future returned by <code>std::async</code>.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">fut = <span class="built_in">std</span>::async(doAsyncWork); <span class="comment">// doAsyncWork may throw.</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (fut.wait_for(<span class="number">0</span>s) == </span><br><span class="line">    <span class="built_in">std</span>::future_status::deferred)) &#123;&#125; <span class="comment">// check to see if task was deferred...</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>If you try to create threads more than the system can provide, a <code>std::system_error</code> exception is thrown.</p>
</li>
<li><p>Invoking <code>join</code> or <code>detach</code> on an unjoinable thread yields <code>undefined behavior</code>.</p>
</li>
<li><p><code>shared state</code> is the place where callee’s result is stored.</p>
<p>caller(std::future) &lt;——[shared state]——— callee (std::promise)</p>
</li>
<li><p>The destructor for the <code>last future</code> referring to a <code>shared state</code> for a <code>non-deferred task</code> launched via <code>std::async</code> blocks until the task completes.</p>
<p>For asynchronously running tasks, this is akin to an implicit <code>detach</code> on the underlying thread.<br>For <code>deferred tasks</code> for which this is the final future, it means that the deferred task will never run.</p>
</li>
<li><p>A <code>std::packaged_task</code> object prepares a function(or other callable object) for asynchronous execution by wrapping it such that its result is put into a <code>shared state</code>.<br>The future created by <code>std::packaged_task</code> doesn’t satisfy above conditions.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">calcValue</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="built_in">std</span>::packaged_task&lt;<span class="title">int</span><span class="params">()</span>&gt; <span class="title">pt</span><span class="params">(calcValue)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">auto</span> fut = pt.get_future();</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="built_in">std</span>::thread <span class="title">t</span><span class="params">(<span class="built_in">std</span>::move(pt))</span></span>; <span class="comment">// it&#x27;s upto thread, not future.</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">std</span>::async(<span class="built_in">std</span>::move(pt)); <span class="comment">// no reason to don&#x27;t use std::async directly.</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>std::promise</code> and <code>std::future</code> can be used for event communication.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">std</span>::promise&lt;<span class="keyword">void</span>&gt; p;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">react</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">detect</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="function"><span class="built_in">std</span>::thread <span class="title">t</span><span class="params">([]</span></span></span><br><span class="line"><span class="function"><span class="params">  &#123;</span></span></span><br><span class="line"><span class="function"><span class="params">    p.get_future().wait();</span></span></span><br><span class="line"><span class="function"><span class="params">    react();</span></span></span><br><span class="line"><span class="function"><span class="params">  &#125;)</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line">  ... // some work prior to call to react.</span><br><span class="line"></span><br><span class="line">  p.set_value();</span><br><span class="line"></span><br><span class="line">  t.jon();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// suspend then unsuspend not just one reacting task, but many.</span></span><br><span class="line"><span class="comment">// std::shared_future instead of std::future.</span></span><br><span class="line"><span class="built_in">std</span>::promise&lt;<span class="keyword">void</span>&gt; p;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">detect</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">auto</span> sf = p.get_future().share();</span><br><span class="line"></span><br><span class="line">  <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="built_in">std</span>::thread&gt; vt;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; threadsToRun; ++i)</span><br><span class="line">  &#123;</span><br><span class="line">    vt.emplace_back([sf] &#123; sf.wait(); react(); &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  ... <span class="comment">// some work prior to call to react.</span></span><br><span class="line"></span><br><span class="line">  p.set_value();</span><br><span class="line"></span><br><span class="line">  ...</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">auto</span>&amp;t : vt)</span><br><span class="line">  &#123;</span><br><span class="line">    t.join();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>std::atomic</code> implemented using special machine instructions that are more efficient than <code>mutex</code>.</p>
</li>
<li><p><code>volatile</code> for special memory. <code>std::atomic</code> for concurrency.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="built_in">std</span>::atomic&lt;<span class="keyword">int</span>&gt; <span class="title">ac</span><span class="params">(<span class="number">0</span>)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">volatile</span> <span class="keyword">int</span> <span class="title">vc</span><span class="params">(<span class="number">0</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*------thread1-------*/</span>      <span class="comment">/*------thread2-------*/</span>      </span><br><span class="line">       ++ac;                        ++ac;</span><br><span class="line">       ++vc;                        ++vc;</span><br></pre></td></tr></table></figure>

<p>Each increment consists of <code>reading vc&#39;s value</code>, <code>incrementing the value</code>, <code>writing the result back</code>.<br>But these operations are not guaranteed to proceed atomically.</p>
</li>
<li><p>Generally, compilers are permitted to reorder unrelated assignments:</p>
<p>Even if compilers don’t reorder them, the underlying <code>hardware</code> might do it.</p>
<p><code>std::atomic</code> using <code>sequential consistency</code> imposes restrictions on reorder, no code that precedes a <code>write</code> of a <code>std::atomic</code> may take place afterwards.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">a = b;</span><br><span class="line">x = y;</span><br><span class="line"><span class="comment">// compiler may generally reorder them as:</span></span><br><span class="line">x = y;</span><br><span class="line">a = b;</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>volatile</code> can’t do above thing. but it can tell compilers that we’re dealing with <code>special memory</code>,<br>“Don’t perform any optimizations on operations on this memory”.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//##########1</span></span><br><span class="line">x = <span class="number">10</span>; <span class="comment">// eliminated.</span></span><br><span class="line">x = <span class="number">20</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//##########2</span></span><br><span class="line"><span class="keyword">auto</span> y = x;</span><br><span class="line">y = x;  <span class="comment">// eliminated.</span></span><br><span class="line">x = <span class="number">10</span>; <span class="comment">// eliminated.</span></span><br><span class="line">x = <span class="number">20</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//#########3</span></span><br><span class="line"><span class="function"><span class="built_in">std</span>::atomic&lt;<span class="keyword">int</span>&gt; <span class="title">y</span><span class="params">(x.load())</span></span>;</span><br><span class="line">y.store(x.load());</span><br><span class="line"></span><br><span class="line"><span class="comment">// &quot;optimize&quot;</span></span><br><span class="line"><span class="keyword">register</span> = x.load();</span><br><span class="line"><span class="function"><span class="built_in">std</span>::atomic&lt;<span class="keyword">int</span>&gt; <span class="title">y</span><span class="params">(<span class="keyword">register</span>)</span></span>;</span><br><span class="line">y.store(<span class="keyword">register</span>);</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="Exception"><a href="#Exception" class="headerlink" title="Exception"></a>Exception</h2><ul>
<li><p>Functions offering the strong exception safety guarantee(i.e., the <code>strong guarantee</code>) assure callers that if an exception arises, the state of the program remains as it was prior to the call.</p>
</li>
<li><p>Applying <code>noexcept</code> to functions that won’t produce exceptions: it permits compilers to generate better object code:</p>
<p>In a <code>noexcept</code> function, optimizers needn’t keep the runtime stack in an unwindalbe state if an exception would propagate out of the function.</p>
<p>nor must they ensure that objects in a <code>noexcept</code> function are destroyed in the inverse order of construction should an exception leave the function.</p>
</li>
<li><p><code>noexcept(expression)</code> result is true if the potential exception of the expression is empty.</p>
</li>
<li><p>Destructor is implicitly <code>noexcept</code> unless a data member of the class is of a type that expressly states that its destructor may emit exceptions(e.g., declares it “noexcept(false)”).</p>
</li>
<li><p>If an exception propagates out of a thread’s primary function,<br>or a <code>noexcept</code> specification is violated, local objects may not be destroyed,<br><code>std::abort</code> or an exit function(i.e., <code>std::_Exit, std::exit, std::quick_exit</code>) is called.</p>
</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>, <span class="title">size_t</span> <span class="title">N</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">void</span> <span class="title">swap</span>(<span class="title">T</span> (&amp;<span class="title">a</span>)[<span class="title">N</span>], <span class="title">T</span> (&amp;<span class="title">b</span>)[<span class="title">N</span>]) <span class="title">noexcept</span>(<span class="title">noexcept</span>(<span class="title">swap</span>(*<span class="title">a</span>, *<span class="title">b</span>)));</span></span><br></pre></td></tr></table></figure>

<h2 id="auto-amp-amp-decltype"><a href="#auto-amp-amp-decltype" class="headerlink" title="auto &amp;&amp; decltype()"></a>auto &amp;&amp; decltype()</h2><ul>
<li>C++11 <code>trailing return type</code> syntax:</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> Container, <span class="keyword">typename</span> Index&gt;</span><br><span class="line">auto authAndAccess(Container&amp; c, Index i) -&gt;decltype(c[i])</span><br><span class="line">&#123;</span><br><span class="line">    authenticateUser();</span><br><span class="line">    <span class="keyword">return</span> c[i];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>C++14 permits <code>auto</code> to indicate that a function’s return type.<br>C++14 lambdas may use <code>auto</code> in parameter declarations.<br>However, these uses of <code>auto</code> employ <code>template type deduction</code> not <code>auto</code> type deduction.</li>
<li>Template Type Deduction, the reference-ness of an initializing expression is ignored, so <code>auto</code> return type deduction will strip off the reference</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> Container, <span class="keyword">typename</span> Index&gt;</span><br><span class="line"><span class="function"><span class="keyword">auto</span> <span class="title">authAndAccess</span><span class="params">(Container&amp; c, Index i)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    authenticateUser();</span><br><span class="line">    <span class="keyword">return</span> c[i];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">std</span>::<span class="built_in">deque</span>&lt;<span class="keyword">int</span>&gt; d;</span><br><span class="line">...</span><br><span class="line">autoAndAccess(d, <span class="number">5</span>) = <span class="number">10</span>; <span class="comment">// reference striped. error.</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p><code>decltype(auto)</code> <code>auto</code> specifies that the type is to be deduced, and <code>decltype</code> says that <code>decltype</code> rules should be used during the deduction.</p>
<p><code>decltype(auto)</code> isn’t limited to function return types but also <code>declaring variables</code>.</p>
</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> Container, <span class="keyword">typename</span> Index&gt;</span><br><span class="line"><span class="function"><span class="keyword">decltype</span>(<span class="keyword">auto</span>) <span class="title">authAndAccess</span><span class="params">(Container&amp; c, Index i)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    authenticateUser();</span><br><span class="line">    <span class="keyword">return</span> c[i];</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">deque</span>&lt;<span class="keyword">int</span>&gt; d;</span><br><span class="line">...</span><br><span class="line">autoAndAccess(d, <span class="number">5</span>) = <span class="number">10</span>; <span class="comment">// ok.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ************************ </span></span><br><span class="line">Widget w;</span><br><span class="line"><span class="keyword">const</span> Widget&amp; cw = w;</span><br><span class="line"><span class="keyword">auto</span> myWidget1 = cw; <span class="comment">// auto type deduction: myWidget1&#x27;s type is Widget</span></span><br><span class="line"><span class="keyword">decltype</span>(<span class="keyword">auto</span>) myWidget2 = cw; <span class="comment">// decltype deduction: myWidget2&#x27;s type is const Widget&amp;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>decltype</code> to a name yields the type <code>T</code> for that name.<br><code>decltype</code> to a lvalue expression other than a name yields <code>T&amp;</code>.</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> x = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">decltype</span>(x) is <span class="keyword">int</span>.</span><br><span class="line"><span class="keyword">decltype</span>((x)) is <span class="keyword">int</span>&amp;.</span><br></pre></td></tr></table></figure>

<h2 id="emplace-back"><a href="#emplace-back" class="headerlink" title="emplace_back"></a>emplace_back</h2><ul>
<li><p>emplace_back; emplace_front; emplace;<br>emplace_hint(associative container); emplace_after(std::forward_list)</p>
</li>
<li><p><code>Insertion functions</code> take objects to be inserted.<br><code>Emplacement functions</code> task constructor arguments for obejcts to be inserted which avoid the creation and destruction of <code>temporary objects</code>.</p>
</li>
<li><p>copy initialization &amp;&amp; direct initialization</p>
<p>direct initialization can use <code>explicit</code> constructor.</p>
<p>emplacement functions use direct initialization, which means they may use <code>explicit</code> constructors.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">std</span>::regex r1 = <span class="literal">nullptr</span>; <span class="comment">// error! copy initialization</span></span><br><span class="line"><span class="function"><span class="built_in">std</span>::regex <span class="title">r2</span><span class="params">(<span class="literal">nullptr</span>)</span></span>;  <span class="comment">// compiles. direct initialization</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="enum-class-scoped-enum"><a href="#enum-class-scoped-enum" class="headerlink" title="enum class (scoped enum)"></a>enum class (scoped enum)</h2><ul>
<li><p><code>enum class Color: std::uint32_t &#123; black, white, red &#125;</code></p>
</li>
<li><p>By default, the underlyng type for scoped enum is <code>int</code>. <code>std::underlying_type_t&lt;Color&gt;</code>.<br>Unscoped enums have no default underlying type.</p>
</li>
<li><p>Scoped enums may be forward-declared, because the underlying type for them is always known.<br>Unscoped enums may be forward-declared only if their declaration specifies an underlying type.</p>
</li>
</ul>
<h2 id="delete"><a href="#delete" class="headerlink" title="=delete"></a>=delete</h2><ul>
<li>Any functions may be deleted.</li>
<li>Deleted functions can prevent use of template instantiations that should be disabled.<br>It’s not possible to give a member function template specialization a different access level from that of the main template.</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">isLucky</span><span class="params">(<span class="keyword">int</span> number)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">isLucky</span><span class="params">(<span class="keyword">char</span>)</span> </span>= <span class="keyword">delete</span>; <span class="comment">// reject chars</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">processPointer</span><span class="params">(T* ptr)</span></span>;</span><br><span class="line"><span class="keyword">template</span>&lt;&gt;</span><br><span class="line"><span class="keyword">void</span> processPointer&lt;<span class="keyword">void</span>&gt;(<span class="keyword">void</span>*) = <span class="keyword">delete</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Widget</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">    <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">processPointer</span><span class="params">(T* ptr)</span> </span>&#123;...&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="keyword">template</span> &lt;&gt;</span><br><span class="line">    <span class="keyword">void</span> processPointer&lt;<span class="keyword">void</span>&gt;(<span class="keyword">void</span>*);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="constexpr"><a href="#constexpr" class="headerlink" title="constexpr"></a>constexpr</h2><ul>
<li><p><code>constexpr</code> indicated a value that’s not only constant, it’s known during compilation.</p>
</li>
<li><p><code>constexpr functions</code> produce compile-time constants when they are called with compile-time constants. if they’re called with values not known until runtime, they produce runtime values.</p>
</li>
<li><p>I/O statements are generally not permitted in <code>constexpr</code> functions.</p>
</li>
<li><p>The conditional <code>?:</code> operator can be used in place of if-else statements.<br><code>Recursion</code> can be used instead of loops.</p>
</li>
<li><p><code>constexpr functions</code> are limited to taking and returning <code>literal types</code>.</p>
<p>In C++11, all built-in types except <code>void</code> qualify.<br>In C++11, <code>constexpr member functions</code> are implicitly const;<br>In C++14, the restrictions on <code>constexpr</code> functions are substantially looser.</p>
<p>user-defined types may be literal too, because constructors and other member functions may be constexpr.</p>
</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// C++11</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">constexpr</span> <span class="keyword">int</span> <span class="title">pow</span><span class="params">(<span class="keyword">int</span> base, <span class="keyword">int</span> <span class="built_in">exp</span>)</span> <span class="keyword">noexcept</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (<span class="built_in">exp</span> == <span class="number">0</span> ? <span class="number">1</span> : base * <span class="built_in">pow</span>(base, <span class="built_in">exp</span> - <span class="number">1</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// C++14</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">constexpr</span> <span class="keyword">int</span> <span class="title">pow</span><span class="params">(<span class="keyword">int</span> base, <span class="keyword">int</span> <span class="built_in">exp</span>)</span> <span class="keyword">noexcept</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">auto</span> result = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="built_in">exp</span>; ++i)</span><br><span class="line">        result *= base;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// user-defined literal</span></span><br><span class="line"><span class="comment">// In C++11, setX, setY aren&#x27;t const and they have void return types.</span></span><br><span class="line"><span class="comment">// In C++14, setX, setY can be constexpr.</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span> </span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:  </span><br><span class="line">constexpr Point(double xVal = 0, double yVal = 0) noexcept  : x(xVal), y(yVal)  &#123;&#125; </span><br><span class="line"><span class="function"><span class="keyword">constexpr</span> <span class="keyword">double</span> <span class="title">xValue</span><span class="params">()</span> <span class="keyword">const</span> <span class="keyword">noexcept</span> </span>&#123; <span class="keyword">return</span> x; &#125;  </span><br><span class="line"><span class="function"><span class="keyword">constexpr</span> <span class="keyword">double</span> <span class="title">yValue</span><span class="params">()</span> <span class="keyword">const</span> <span class="keyword">noexcept</span> </span>&#123; <span class="keyword">return</span> y; &#125;  </span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> __cplusplus==201402L</span></span><br><span class="line"><span class="function"><span class="keyword">constexpr</span> <span class="keyword">void</span> <span class="title">setX</span><span class="params">(<span class="keyword">double</span> newX)</span> <span class="keyword">noexcept</span> </span>&#123; x = newX; &#125;  </span><br><span class="line"><span class="function"><span class="keyword">constexpr</span> <span class="keyword">void</span> <span class="title">setY</span><span class="params">(<span class="keyword">double</span> newY)</span> <span class="keyword">noexcept</span> </span>&#123; y = newY; &#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">elif</span> __cplusplus==201103L</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setX</span><span class="params">(<span class="keyword">double</span> newX)</span> <span class="keyword">noexcept</span> </span>&#123; x = newX; &#125;  </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setY</span><span class="params">(<span class="keyword">double</span> newY)</span> <span class="keyword">noexcept</span> </span>&#123; y = newY; &#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> </span><br><span class="line"><span class="keyword">private</span>:  </span><br><span class="line"><span class="keyword">double</span> x, y;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="mutable"><a href="#mutable" class="headerlink" title="mutable"></a>mutable</h2><ul>
<li><code>const member functions</code> can change <code>mutable</code> data members.</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Polynomial</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">using</span> RootsType = <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">double</span>&gt;;</span><br><span class="line"></span><br><span class="line">    <span class="function">RootsType <span class="title">roots</span><span class="params">()</span> <span class="keyword">const</span> </span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!rootAreValid)</span><br><span class="line">        &#123;</span><br><span class="line">            rootsAreValid = <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> rootsVals;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="keyword">mutable</span> <span class="keyword">bool</span> rootsAreValid &#123;<span class="literal">false</span>&#125;;</span><br><span class="line">    <span class="keyword">mutable</span> RootsType rootsVals &#123;&#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="Function’s-Reference-Qualifiers"><a href="#Function’s-Reference-Qualifiers" class="headerlink" title="Function’s Reference Qualifiers"></a>Function’s <code>Reference Qualifiers</code></h2><ul>
<li>They make it possible to limit use of a member function to lvalues only or rvalues only.</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Widget</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">doWork</span><span class="params">()</span> &amp;</span>;  <span class="comment">// *this is an lvalue</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">doWork</span><span class="params">()</span> &amp;&amp;</span>; <span class="comment">// *this is an rvalue</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="RVO-Return-Value-Optimization"><a href="#RVO-Return-Value-Optimization" class="headerlink" title="RVO(Return Value Optimization)"></a>RVO(Return Value Optimization)</h2><ul>
<li><p>the type of the local object is the same as that returned by the function.<br>the local object is what’s being returned.</p>
</li>
<li><p>If the conditions for the <code>RVO are met</code>, but compilers choose <code>not to perform copy elision</code>,<br>the object being returned must be treated as an <code>rvalue</code>.</p>
</li>
</ul>
<h2 id="SSO-Small-String-Optimization"><a href="#SSO-Small-String-Optimization" class="headerlink" title="SSO(Small String Optimization)"></a>SSO(Small String Optimization)</h2><ul>
<li>“small” strings (e.g., those with a capacity of no more than 15 characters)<br>are stored in a buffer within the <code>std::string</code> object. no heap-allocated storage is used.</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://zerobit.ga/2021/04/30/cpp/effective_modern_cpp/" data-id="ckofhdl9r002kd0vvegcyfzec" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-cpp/modern_cpp" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/03/18/cpp/modern_cpp/" class="article-date">
  <time datetime="2021-03-17T16:00:00.000Z" itemprop="datePublished">2021-03-18</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/CPP/">CPP</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/03/18/cpp/modern_cpp/">Modern CPP</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Language-Enhancements"><a href="#Language-Enhancements" class="headerlink" title="Language Enhancements"></a>Language Enhancements</h2><h3 id="Tail-Type-Inference"><a href="#Tail-Type-Inference" class="headerlink" title="Tail Type Inference"></a>Tail Type Inference</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. `auto` cannot be used for function arguments for type derivation. </span></span><br><span class="line"><span class="comment">// traditional C++</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> R, <span class="keyword">typename</span> T, <span class="keyword">typename</span> U&gt;</span><br><span class="line"><span class="function">R <span class="title">Add</span><span class="params">(T x, U y)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x + y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 2. C++11. decltype(x + y). </span></span><br><span class="line"><span class="comment">// error: x and y have not been defined when the compiler reads decltype(x + y).</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span> U&gt;</span><br><span class="line"><span class="keyword">decltype</span>(x + y) Add(T x, U y) &#123;</span><br><span class="line">    <span class="keyword">return</span> x + y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 3. Tail Type Inference</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span> U&gt;</span><br><span class="line">auto Add(T x, U y) -&gt; decltype(x + y) &#123;</span><br><span class="line">    <span class="keyword">return</span> x + y;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Range-based-for-loop"><a href="#Range-based-for-loop" class="headerlink" title="Range based for loop"></a>Range based for loop</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">auto</span> element: vec) <span class="comment">// readonly</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">auto</span>&amp; element: vec) <span class="comment">// writable</span></span><br></pre></td></tr></table></figure>

<h3 id="Strongly-typed-enumerations"><a href="#Strongly-typed-enumerations" class="headerlink" title="Strongly typed enumerations"></a>Strongly typed enumerations</h3><p><code>enum class : (integral type int by default) &#123;&#125;;</code></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="class"><span class="keyword">class</span> <span class="title">new_enum</span> :</span> <span class="keyword">unsigned</span> <span class="keyword">int</span> &#123;</span><br><span class="line">    value1,</span><br><span class="line">    value2,</span><br><span class="line">    value3 = <span class="number">100</span>,</span><br><span class="line">    value4 = <span class="number">100</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="built_in">std</span>::ostream&amp; opreator&lt;&lt; (</span><br><span class="line">    <span class="keyword">typename</span> <span class="built_in">std</span>::enable_if&lt;</span><br><span class="line">        <span class="built_in">std</span>::is_enum&lt;T&gt;::value, <span class="built_in">std</span>::ostream&gt;::type&amp; stream, T e) &#123;</span><br><span class="line">    <span class="keyword">return</span> stream &lt;&lt; <span class="keyword">static_cast</span>&lt;<span class="keyword">typename</span> <span class="built_in">std</span>::underlying_type&lt;T&gt;::type&gt;(e);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="RValue-Reference"><a href="#RValue-Reference" class="headerlink" title="RValue Reference"></a>RValue Reference</h3><ul>
<li>lvalue: value to the left of the assignment symbol.</li>
<li>rvalue: value to the right of the assignment symbol.<pre><code>    Temporary object no longer exists after the expression ends.
</code></pre>
</li>
</ul>
<p>C++11, <code>rvalue reference</code> divides rvalue into:</p>
<ol>
<li><p>pure rvalue:<br>temporary variables returned by non-references;<br>temporary variables generated by operation expressions;<br>original literals;<br>lambda expressions;</p>
</li>
<li><p>xvalue(expire value):<br>a temporary value that can be identified while being able to be moved.</p>
</li>
</ol>
<h3 id="Literal"><a href="#Literal" class="headerlink" title="Literal"></a>Literal</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// * Raw String Literal `R&quot;()&quot;`</span></span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">string</span> path = <span class="string">&quot;C:\\Path\\To\\File&quot;</span>;</span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">string</span> raw_path = <span class="string">R&quot;(C:\Path\To\File)&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// * Custom Literal by overloading the double quotes suffix operator:</span></span><br><span class="line"><span class="comment">//   Custom Literal support four literals:</span></span><br><span class="line"><span class="comment">//   1. Integer literal: (unsigned long long, const char*)</span></span><br><span class="line"><span class="comment">//   2. Floating-point literals: (long double, const char*)</span></span><br><span class="line"><span class="comment">//   3. String literals: (const char *, size_t )</span></span><br><span class="line"><span class="comment">//   4. Character literals: (char/wchar_t/char16_t, char32_t)</span></span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">string</span> <span class="keyword">operator</span><span class="string">&quot;&quot;</span> _wow1(<span class="keyword">const</span> <span class="keyword">char</span>* wow1, <span class="keyword">size_t</span> len) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">std</span>::<span class="built_in">string</span>(wow1) + <span class="string">&quot;woooooooooooow, amazing&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">string</span> <span class="keyword">operator</span><span class="string">&quot;&quot;</span> _wow2(<span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">long</span> i) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">std</span>::to_string(i) + <span class="string">&quot;woooooooooooow, amazing&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Tuples"><a href="#Tuples" class="headerlink" title="Tuples"></a>Tuples</h3><ul>
<li><code>std::make_tuple; std::get&lt;n&gt;; std::tie(a, b, c)</code></li>
<li><code>std::tuple_cat; std::tuple_size</code></li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// std::make_tuple</span></span><br><span class="line">    <span class="keyword">auto</span> student = <span class="built_in">std</span>::make_tuple(<span class="number">3.8</span>, <span class="string">&#x27;A&#x27;</span>, <span class="string">&quot;John&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// std::get</span></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="built_in">std</span>::get&lt;<span class="number">0</span>&gt;(student) &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// std::tie</span></span><br><span class="line">    <span class="keyword">double</span> gpa;</span><br><span class="line">    <span class="keyword">char</span> grade;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">string</span> name;</span><br><span class="line">    <span class="built_in">std</span>::tie(gpa, grade, name) = student;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; gpa &lt;&lt; grade &lt;&lt; name &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// std::tuple_cat</span></span><br><span class="line">    <span class="keyword">auto</span> new_tuple = <span class="built_in">std</span>::tuple_cat(tuple1, tuple2);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// std::tuple_size&lt;T&gt;</span></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="built_in">std</span>::tuple_size&lt;<span class="keyword">decltype</span>(new_type)&gt;::value &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>Runtime Indexing</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">size_t</span> n, <span class="keyword">typename</span>... T&gt;</span><br><span class="line"><span class="keyword">constexpr</span> <span class="built_in">std</span>::variant&lt;T...&gt; _tuple_index(<span class="keyword">const</span> <span class="built_in">std</span>::tuple&lt;T...&gt; &amp;tpl,</span><br><span class="line">                                          <span class="keyword">size_t</span> i) &#123;</span><br><span class="line">  <span class="function"><span class="keyword">if</span> <span class="title">constexpr</span> <span class="params">(n &gt;= <span class="keyword">sizeof</span>...(T))</span></span></span><br><span class="line"><span class="function">    <span class="keyword">throw</span> <span class="title">std::out_of_range</span><span class="params">(<span class="string">&quot; .&quot;</span>)</span></span>;</span><br><span class="line">  <span class="keyword">if</span> (i == n)</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">std</span>::variant&lt;T...&gt;&#123;<span class="built_in">std</span>::in_place_index&lt;n&gt;, <span class="built_in">std</span>::get&lt;n&gt;(tpl)&#125;;</span><br><span class="line">  <span class="keyword">return</span> _tuple_index&lt;(n &lt; <span class="keyword">sizeof</span>...(T) - <span class="number">1</span> ? n + <span class="number">1</span> : <span class="number">0</span>)&gt;(tpl, i);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span>... T&gt;</span><br><span class="line">constexpr std::variant&lt;T...&gt; tuple_index(const std::tuple&lt;T...&gt; &amp;tpl,</span><br><span class="line">                                         <span class="keyword">size_t</span> i) &#123;</span><br><span class="line">  <span class="keyword">return</span> _tuple_index&lt;<span class="number">0</span>&gt;(tpl, i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span>  </span>&#123;</span><br><span class="line">  <span class="keyword">int</span> index = <span class="number">1</span>;</span><br><span class="line">  <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; tuple_index(num_tuple, index) &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">  <span class="keyword">auto</span> &amp;&amp;value = tuple_index(num_tuple, index);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="constexpr"><a href="#constexpr" class="headerlink" title="constexpr"></a><code>constexpr</code></h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="keyword">auto</span> <span class="title">print_type_info</span><span class="params">(<span class="keyword">const</span> T&amp; t)</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">if</span> <span class="title">constexpr</span> <span class="params">(<span class="built_in">std</span>::is_integral&lt;T&gt;::value)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> t + <span class="number">1</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> t + <span class="number">0.001</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="noexcept"><a href="#noexcept" class="headerlink" title="noexcept"></a><code>noexcept</code></h3><p>C++11 simplifies exception declarations into two cases:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">may_throw</span><span class="params">()</span></span>;   <span class="comment">// May throw any exception</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">no_throw</span><span class="params">()</span> <span class="keyword">noexcept</span></span>; <span class="comment">// Cannot throw any exception</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="built_in">std</span>::boolalpha &lt;&lt; <span class="string">&quot;may_thorow() noexcept? &quot;</span> &lt;&lt; <span class="keyword">noexcept</span>(may_throw()) &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br></pre></td></tr></table></figure>

<p>If a function modified with <code>noexcept</code> is thrown, the compiler will use <code>std::terminate()</code> to immediately terminate the program.</p>
<p><code>noexcept</code> can also be used as an <code>operator</code> to manipulate an expression.</p>
<h3 id="alignof-alignas-std-max-align-t"><a href="#alignof-alignas-std-max-align-t" class="headerlink" title="alignof, alignas, std::max_align_t"></a><code>alignof</code>, <code>alignas</code>, <code>std::max_align_t</code></h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">struct <span class="title">alignas</span><span class="params">(<span class="built_in">std</span>::<span class="keyword">max_align_t</span>)</span> AlignasStorage </span>&#123;</span><br><span class="line">    <span class="keyword">char</span> a;</span><br><span class="line">    <span class="keyword">int</span>  b;</span><br><span class="line">    <span class="keyword">double</span> c;</span><br><span class="line">    <span class="keyword">long</span> <span class="keyword">long</span> d;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="keyword">alignof</span>(AlignasStorage) &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br></pre></td></tr></table></figure>

<h2 id="Template"><a href="#Template" class="headerlink" title="Template"></a>Template</h2><h3 id="Extern-Template"><a href="#Extern-Template" class="headerlink" title="Extern Template"></a>Extern Template</h3><ul>
<li>Traditional: templates are instantiated by the compiler only when they are used.</li>
<li>C++11: explicitly tell the compiler when to instantiate the template.</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> <span class="class"><span class="keyword">class</span> <span class="title">std</span>:</span>:<span class="built_in">vector</span>&lt;<span class="keyword">bool</span>&gt;; <span class="comment">// force instantiation.</span></span><br><span class="line"><span class="keyword">extern</span> <span class="keyword">template</span> <span class="class"><span class="keyword">class</span> <span class="title">std</span>:</span>:<span class="built_in">vector</span>&lt;<span class="keyword">double</span>&gt;; <span class="comment">// should not instantiation in current file.</span></span><br></pre></td></tr></table></figure>

<h3 id="Deduction-for-class-templates"><a href="#Deduction-for-class-templates" class="headerlink" title="Deduction for class templates"></a>Deduction for class templates</h3><p>Class template argument deduction is only performed if no template argument list is present.</p>
<ul>
<li>Implicitly-generated deduction guides</li>
<li>Deduction for alias templates</li>
<li><code>User-defined deduction guides</code></li>
</ul>
<p><code>explicit-specifier(optional) template-name(parameter-declaration-clause) -&gt; simple-template-id</code></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// struct.</span></span><br><span class="line">template &lt;class... Ts&gt; struct overloaded : Ts... &#123; using Ts::operator()...; &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// trailing return function.</span></span><br><span class="line"><span class="comment">// explicit deduction guide (not needed as of C++20)</span></span><br><span class="line"><span class="keyword">template</span> &lt;class... Ts&gt; overloaded(Ts...) -&gt; overloaded&lt;Ts...&gt;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">var_t</span> = <span class="built_in">std</span>::variant&lt;<span class="keyword">int</span>, <span class="keyword">long</span>, <span class="keyword">double</span>, <span class="built_in">std</span>::<span class="built_in">string</span>&gt;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">var_t</span>&gt; vec = &#123; <span class="number">10</span>, <span class="number">15l</span>, <span class="number">1.5</span>, <span class="string">&quot;hello&quot;</span> &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span>&amp; v: vec) &#123;</span><br><span class="line">        <span class="built_in">std</span>::visit(overloaded &#123;</span><br><span class="line">            [](<span class="keyword">auto</span> arg) &#123; <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; arg &lt;&lt; <span class="string">&#x27; &#x27;</span>; &#125;,</span><br><span class="line">            [](<span class="keyword">double</span> arg) &#123; <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="built_in">std</span>::fixed &lt;&lt; arg &lt;&lt; <span class="string">&#x27; &#x27;</span>; &#125;,</span><br><span class="line">            [](<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span>&amp; arg) &#123; <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="built_in">std</span>::quoted(arg) &lt;&lt; <span class="string">&#x27; &#x27;</span>; &#125;,  </span><br><span class="line">        &#125;, v);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Variadic-Templates"><a href="#Variadic-Templates" class="headerlink" title="Variadic Templates"></a>Variadic Templates</h3><ul>
<li>Unpacking template parameters</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. Recursive template function</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T0&gt;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">printf1</span><span class="params">(T0 value)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; value &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span>... Ts&gt;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">printf1</span><span class="params">(T value, Ts... args)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; value &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    printf1(args...);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 2. Variable parameter template expansion</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T0, <span class="keyword">typename</span>... T&gt;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">printf2</span><span class="params">(T0 t0, T... t)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; t0 &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="function"><span class="keyword">if</span> <span class="title">constexpr</span> <span class="params">(<span class="keyword">sizeof</span>...(t) &gt; <span class="number">0</span>)</span></span></span><br><span class="line"><span class="function">        <span class="title">printf2</span><span class="params">(t...)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 3. Initialize list expansion</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span>... Ts&gt;</span><br><span class="line"><span class="function"><span class="keyword">auto</span> <span class="title">printf3</span><span class="params">(T value, Ts.. args)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; value &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    (<span class="keyword">void</span>) <span class="built_in">std</span>::initialize_list&lt;T&gt; &#123; ([&amp;args] &#123;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; args &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    &#125;(), value)...&#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Fold-Expression"><a href="#Fold-Expression" class="headerlink" title="Fold Expression"></a>Fold Expression</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span>... T&gt;</span><br><span class="line"><span class="function"><span class="keyword">auto</span> <span class="title">sum</span><span class="params">(T... t)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (t + ...);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="decltype-And-std-declval-lt-T-gt"><a href="#decltype-And-std-declval-lt-T-gt" class="headerlink" title="decltype And std::declval&lt;T&gt;"></a><code>decltype And std::declval&lt;T&gt;</code></h3><p><code>declval</code> is commonly used in templates where acceptable template parameters may have <code>no constructor</code> in common, but have the same member function whose <code>return type</code> is needed.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span> U&gt;</span><br><span class="line">auto Add(T x, U y) -&gt; decltype(x+y) &#123;</span><br><span class="line">    <span class="keyword">return</span> x + y;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// std::declval&lt;T&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Default</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">foo</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123; <span class="keyword">return</span> <span class="number">1</span>; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">NoDefault</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    NoDefault() = <span class="keyword">delete</span>;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">fool</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123; <span class="keyword">return</span> <span class="number">1</span>; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">decltype</span>(Default().foo()) n1 = <span class="number">1</span>;</span><br><span class="line"><span class="comment">// decltype(NoDefault().fool()) n2 = n1; // error: no default constructor.</span></span><br><span class="line"><span class="keyword">decltype</span>(<span class="built_in">std</span>::declval&lt;NoDefault&gt;().foo()) n2 = n1; <span class="comment">// ok. no constructor needed.</span></span><br></pre></td></tr></table></figure>

<h3 id="std-forward-lt-T-gt"><a href="#std-forward-lt-T-gt" class="headerlink" title="std::forward&lt;T&gt;"></a><code>std::forward&lt;T&gt;</code></h3><h2 id="Concurrency"><a href="#Concurrency" class="headerlink" title="Concurrency"></a>Concurrency</h2><ul>
<li><code>RAII</code> guarantees the exceptional security of the code while keep the simplicity of the code.</li>
<li><code>std::atomic&lt;T&gt;::is_lock_free</code></li>
<li><code>std::future</code> can be used to get the results of asynchronous tasks.</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="built_in">std</span>::packaged_task&lt;<span class="title">int</span><span class="params">()</span>&gt; <span class="title">task</span><span class="params">([]() &#123; <span class="keyword">return</span> <span class="number">7</span>; &#125;)</span></span></span><br><span class="line"><span class="function"><span class="built_in">std</span>::<span class="built_in">future</span>&lt;<span class="keyword">int</span>&gt; result </span>= task.get_future();</span><br></pre></td></tr></table></figure>

<h3 id="Atomic-and-Memory-Order"><a href="#Atomic-and-Memory-Order" class="headerlink" title="Atomic and Memory Order"></a>Atomic and Memory Order</h3><p><code>Memory Order</code> is not only about atomic operations but also operations before/after atomic operations.</p>
<ul>
<li>relaxed: single thread sequential. between different threads is <code>arbitrary</code>.</li>
<li>release/consume: similar to release/acquire, but is data dependencies.</li>
<li>release/acquire: all writes before release are visible to any other thread.</li>
<li>sequential: atomic operations satisfy sequence consistency.</li>
</ul>
<h2 id="Regular-Expression"><a href="#Regular-Expression" class="headerlink" title="Regular Expression"></a>Regular Expression</h2><ul>
<li><code>(,)</code> Marks the start and end of a subexpression. Subexpression can be obtained for later use.</li>
<li><code>[,]</code> Marks the start and end of a bracket expression.</li>
<li><code>&#123;,&#125;</code> Marks the start and end of a qualifier expression.</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://zerobit.ga/2021/03/18/cpp/modern_cpp/" data-id="ckofhdl8i000dd0vv2gc56fdi" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-windows/memory_leak" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/02/20/windows/memory_leak/" class="article-date">
  <time datetime="2021-02-19T16:00:00.000Z" itemprop="datePublished">2021-02-20</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Windows/">Windows</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/02/20/windows/memory_leak/">Memory Leak</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Using-Performance-Monitor-to-Find-a-User-Mode-Memory-Leak"><a href="#Using-Performance-Monitor-to-Find-a-User-Mode-Memory-Leak" class="headerlink" title="Using Performance Monitor to Find a User-Mode Memory Leak"></a>Using Performance Monitor to Find a User-Mode Memory Leak</h2><ol>
<li><p>Launch <code>perfmon.exe</code>. Add the following counters:</p>
<ul>
<li><p>Process–&gt;<code>Private Bytes</code> which indicates the <code>total amount of memory that a process has allocated</code>, not including memory shared with other processes.</p>
</li>
<li><p>Process–&gt;<code>Virtual Bytes</code> which indicates <code>the current size of the virtual address space that the process is using</code>.</p>
<p>Change the update time to 600 seconds to capture a graph of leak over time. You might also want to log the data to a file for later examination.</p>
</li>
</ul>
</li>
</ol>
<h2 id="UMDH-User-Mode-Dump-Heap-GFlags"><a href="#UMDH-User-Mode-Dump-Heap-GFlags" class="headerlink" title="UMDH(User-Mode Dump Heap) + GFlags"></a>UMDH(User-Mode Dump Heap) + GFlags</h2><ol>
<li><p>Enable <code>Create user mode stack trace database</code> by GFlags.exe under <code>Image File</code> tab.</p>
<p>While it’s possible to turn on the user stack database with the <code>!gflag</code> debugging extension.</p>
</li>
<li><p>You must compare log files recorded at different time to determine which allocation are growing.</p>
 <figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">:: record the <span class="built_in">start</span> state.</span><br><span class="line">umdh -p:pid -f:log1.txt</span><br><span class="line"></span><br><span class="line">:: -------------some operations--------------</span><br><span class="line"></span><br><span class="line">:: record the end state.</span><br><span class="line">umdh -p:pid -f:log2.txt</span><br><span class="line"></span><br><span class="line">:: compare </span><br><span class="line">:: you may also include the -d option,</span><br><span class="line">:: which converts the byte and allocation</span><br><span class="line">:: counts from hexadecimal to decimal.</span><br><span class="line"></span><br><span class="line">umdh log1.txt log2.txt &gt; logCompare.txt</span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
<li><p>Open the logCompare.txt file. Its contents resemble the following:</p>
 <figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">+ 5320 ( f110 - 9df0) 3a allocs BackTrace00B53 </span><br><span class="line">Total increase == 5320  </span><br></pre></td></tr></table></figure>

<ul>
<li>0xf110 bytes allocated by BackTrace00B53 according to records in log2.txt.</li>
<li>0x9d50 bytes allocated by BackTrace00B53 according to records in log1.txt.</li>
<li>0x5320 bytes is the increased bytes allocated by BackTrace00B53 during log1 to log2.</li>
</ul>
</li>
<li><p>To determine what is in that backtrace, open one of the original log files(for example, log2.txt) and search for “BackTrace00B53”. The results are similar to this data:</p>
 <figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">00005320 bytes in 0x14 allocations (@ 0x00000428) by: BackTrace00B53</span><br><span class="line">ntdll!RtlDebugAllocateHeap+0x000000FD</span><br><span class="line">ntdll!RtlAllocateHeapSlowly+0x0000005A</span><br><span class="line">ntdll!RtlAllocateHeap+0x00000808</span><br><span class="line">MyApp!_heap_alloc_base+0x00000069</span><br><span class="line">MyApp!_heap_alloc_dbg+0x000001A2</span><br><span class="line">MyApp!_nh_malloc_dbg+0x00000023</span><br><span class="line">MyApp!_nh_malloc+0x00000016</span><br><span class="line">MyApp!operator new+0x0000000E</span><br><span class="line">MyApp!DisplayMyGraphics+0x0000001E</span><br><span class="line">MyApp!main+0x0000002C</span><br><span class="line">MyApp!mainCRTStartup+0x000000FC</span><br><span class="line">KERNEL32!BaseProcessStart+0x0000003D</span><br></pre></td></tr></table></figure>

<ul>
<li>0x5320 bytes allocated from 0x14(decimal 20) separate allocations of 0x428(decimal 1064) bytes each.</li>
</ul>
</li>
</ol>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/windows-hardware/drivers/debugger/using-performance-monitor-to-find-a-user-mode-memory-leak">Using Performance Monitor to Find a User-Mode Memory Leak</a></li>
<li><a target="_blank" rel="noopener" href="https://www.chromium.org/developers/how-tos/debugging-on-windows">Debugging Chromium on Windows</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/windows-hardware/drivers/debugger/using-umdh-to-find-a-user-mode-memory-leak">Using UMDH to Find a User-Mode Memory Leak</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://zerobit.ga/2021/02/20/windows/memory_leak/" data-id="ckofhdl910018d0vvhvd20hl1" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-fontend/typescript" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/11/20/fontend/typescript/" class="article-date">
  <time datetime="2020-11-19T16:00:00.000Z" itemprop="datePublished">2020-11-20</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Frontend/">Frontend</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/11/20/fontend/typescript/">TypeScript</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Basic-Types"><a href="#Basic-Types" class="headerlink" title="Basic Types"></a>Basic Types</h2><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> isDone: <span class="built_in">boolean</span> = <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">let</span> decimal: <span class="built_in">number</span> = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">let</span> hex: <span class="built_in">number</span> = <span class="number">0xff</span>;</span><br><span class="line"><span class="keyword">let</span> binary: <span class="built_in">number</span> = <span class="number">0b1010</span>;</span><br><span class="line"><span class="keyword">let</span> octal: <span class="built_in">number</span> = <span class="number">0o744</span>;</span><br><span class="line"><span class="keyword">let</span> big: bigint = <span class="number">100n</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ####################### Template String #######################</span></span><br><span class="line"></span><br><span class="line"><span class="string">`big plus one is <span class="subst">$&#123;big + <span class="number">1</span>&#125;</span>`</span>.</span><br><span class="line"></span><br><span class="line"><span class="comment">// ####################### Array #######################</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> list: <span class="built_in">number</span>[] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">let</span> list: <span class="built_in">Array</span>&lt;<span class="built_in">number</span>&gt; = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// ####################### Tuple #######################</span></span><br><span class="line"><span class="comment">// Tuple types allow you to express an array with a fixed</span></span><br><span class="line"><span class="comment">// number of elements whole types are known, but need not be the same.</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> x: [<span class="built_in">string</span>, <span class="built_in">number</span>];</span><br><span class="line">x = [<span class="string">&quot;hello&quot;</span>, <span class="number">10</span>];</span><br><span class="line">x = [<span class="number">10</span>, <span class="string">&quot;hello&quot;</span>]; <span class="comment">// Error</span></span><br><span class="line"><span class="built_in">console</span>.log(x[<span class="number">0</span>]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ####################### Enum #######################</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">enum</span> Color &#123;</span><br><span class="line">    Red = <span class="number">1</span>,</span><br><span class="line">    Green = <span class="number">2</span>,</span><br><span class="line">    Blue = <span class="number">4</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> c: Color = Color.Green;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> colorName: <span class="built_in">string</span> = Color[<span class="number">2</span>];</span><br><span class="line"><span class="built_in">console</span>.log(colorName);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ####################### Unknown #######################</span></span><br><span class="line"><span class="comment">// &#x27;maybe&#x27; could be a string, object, boolean, undefined, or other types.</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">declare</span> <span class="keyword">const</span> maybe: unknown;</span><br><span class="line"><span class="keyword">const</span> aNumber: <span class="built_in">number</span> = maybe; <span class="comment">// Error</span></span><br><span class="line"><span class="keyword">if</span> (maybe === <span class="literal">true</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> aBoolean: <span class="built_in">boolean</span> = maybe;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">typeof</span> maybe === <span class="string">&quot;string&quot;</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> aString: <span class="built_in">string</span> = maybe;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ####################### Any #######################</span></span><br><span class="line"><span class="comment">// *opt-out* of type checking.</span></span><br><span class="line"><span class="comment">// Any will propagate through your objects.</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">declare</span> <span class="function"><span class="keyword">function</span> <span class="title">getValue</span>(<span class="params">key: <span class="built_in">string</span></span>): <span class="title">any</span></span>;</span><br><span class="line"><span class="comment">// OK, return value of &#x27;getValue&#x27; is not checked</span></span><br><span class="line"><span class="keyword">const</span> str: <span class="built_in">string</span> = getValue(<span class="string">&quot;myString&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> looselyTyped: <span class="built_in">any</span> = <span class="number">4</span>;</span><br><span class="line"><span class="comment">// OK, ifItExists might exist at runtime.</span></span><br><span class="line">looselyTyped.ifItExists();</span><br><span class="line"><span class="comment">// OK, toFixed exists (but the compiler doesn&#x27;t check)</span></span><br><span class="line">looselyTyped.toFixed();</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> strictlyTyped: unknown = <span class="number">4</span>;</span><br><span class="line">strictlyType.toFixed(); <span class="comment">// Error, Object is of type &#x27;unknown&#x27;.</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> looselyType: <span class="built_in">any</span> = &#123;&#125;;</span><br><span class="line"><span class="keyword">let</span> d = looselyTyped.a.b.c.d; <span class="comment">// ^ = let d: any</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ####################### Void #######################</span></span><br><span class="line"><span class="comment">// you can only assign null(only if --strictNummChecks isn&#x27;t specified) or undefined to them.</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">warnUser</span>(<span class="params"></span>): <span class="title">void</span> </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;This is my warning message&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> unusable: <span class="built_in">void</span> = <span class="literal">undefined</span>;</span><br><span class="line">unusable = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ####################### Null and Undefined #######################</span></span><br><span class="line"><span class="comment">// By default null and undefined are subtypes of all other types. That means you can assign null and undefined to something like number.</span></span><br><span class="line"><span class="comment">// However, when using the --strictNullChecks flag, null and undefined are only assignable to unknown, any and their respective types (the one exception being that undefined is also assignable to void). This helps avoid many common errors. In cases where you want to pass in either a string or null or undefined, you can use the union type string | null | undefined.</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> u: <span class="literal">undefined</span> = <span class="literal">undefined</span>;</span><br><span class="line"><span class="keyword">let</span> n: <span class="literal">null</span> = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ####################### Never #######################</span></span><br><span class="line"><span class="comment">// never occur.</span></span><br><span class="line"><span class="comment">// function that always throws an exception or one never returns.</span></span><br><span class="line"><span class="comment">// variables acquire the type never when narrowed by any type guards that can never be true.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// function returning never must not have a reachable end point.</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">error</span>(<span class="params">message: <span class="built_in">string</span></span>): <span class="title">never</span> </span>&#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(message);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">infiniteLoop</span>(<span class="params"></span>): <span class="title">never</span> </span>&#123;</span><br><span class="line">    <span class="keyword">while</span> (<span class="literal">true</span>) &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Inferred return type is never.</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fail</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> error(<span class="string">&quot;something failed&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ############################# Object #######################</span></span><br><span class="line"><span class="keyword">declare</span> <span class="function"><span class="keyword">function</span> <span class="title">create</span>(<span class="params">o: <span class="built_in">object</span> | <span class="literal">null</span></span>):  <span class="title">void</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ############################# Type Assertion #######################</span></span><br><span class="line"><span class="keyword">let</span> someValue: unknown = <span class="string">&quot;this is a string&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> strLength0: <span class="built_in">number</span> = (someValue <span class="keyword">as</span> <span class="built_in">string</span>).length;</span><br><span class="line"><span class="keyword">let</span> strLenght1: <span class="built_in">number</span> = (&lt;<span class="built_in">string</span>&gt;someValue).length;</span><br></pre></td></tr></table></figure>

<h2 id="Interfaces"><a href="#Interfaces" class="headerlink" title="Interfaces"></a>Interfaces</h2><ul>
<li>One of TypeScript’s <code>core principles</code> is that type checking focuses on the <code>shape</code> that values have.</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ############################# Optional Properties #######################</span></span><br><span class="line"><span class="keyword">interface</span> SquareConfig &#123;</span><br><span class="line">    color?: <span class="built_in">string</span>;</span><br><span class="line">    width?: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createSquare</span>(<span class="params">config: SquareConfig</span>): </span>&#123; color: <span class="built_in">string</span>; area: <span class="built_in">number</span> &#125; &#123;</span><br><span class="line">    <span class="keyword">let</span> newSquare = &#123; color: <span class="string">&quot;white&quot;</span>, area: <span class="number">100</span> &#125;;</span><br><span class="line">    <span class="keyword">if</span> (config.color) &#123;</span><br><span class="line">        newSquare.color = config.color;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (config.width) &#123;</span><br><span class="line">        newSquare.area = config.width * config.width;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> newSquare;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ############################# Readonly Properties #######################</span></span><br><span class="line"><span class="comment">// Variable use const whereas properties use readonly.</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> Point &#123;</span><br><span class="line">    <span class="keyword">readonly</span> x: <span class="built_in">number</span>;</span><br><span class="line">    <span class="keyword">readonly</span> y: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> pt: Point = &#123; x: <span class="number">10</span>, y: <span class="number">20</span> &#125;;</span><br><span class="line">pt.x = <span class="number">5</span>; <span class="comment">// Error</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> a: <span class="built_in">number</span>[] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>];</span><br><span class="line"><span class="keyword">let</span> ro: ReadonlyArray&lt;<span class="built_in">number</span>&gt; = a;</span><br><span class="line">ro[<span class="number">0</span>] = <span class="number">0</span>; <span class="comment">// Error</span></span><br><span class="line">a = ro;    <span class="comment">// Error. &#x27;readonly number[]&#x27; cannot be assigned to the mutable type &#x27;number[]&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ############################# Excess Property Checks #######################</span></span><br><span class="line"><span class="comment">// Object literals get special treatment and undergo `excess property` checking</span></span><br><span class="line"><span class="comment">// when assigning them to other variables, or passing them as arguments.</span></span><br><span class="line"><span class="comment">// If an object literal has any properties that the “target type” doesn’t have, you’ll get an error.</span></span><br><span class="line"><span class="keyword">interface</span> SquareConfig &#123;</span><br><span class="line">    color?: <span class="built_in">string</span>;</span><br><span class="line">    width?: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createSquare</span>(<span class="params">config: SquareConfig</span>): </span>&#123; color: <span class="built_in">string</span>; area: <span class="built_in">number</span> &#125; &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        color: config.color || <span class="string">&quot;red&quot;</span>,</span><br><span class="line">        area: config.width ? config.width * config.width : <span class="number">20</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> mySquare = createSquare(&#123; colour: <span class="string">&quot;red&quot;</span>, width: <span class="number">100</span> &#125;);</span><br><span class="line"><span class="comment">// Argument of type &#x27;&#123; colour: string; width: number; &#125;&#x27;</span></span><br><span class="line"><span class="comment">// is not assignable to parameter of type &#x27;SquareConfig&#x27;.</span></span><br><span class="line"><span class="comment">// Object literal may only specify known properties,</span></span><br><span class="line"><span class="comment">// but &#x27;colour&#x27; does not exist in type &#x27;SquareConfig&#x27;. Did you mean to write &#x27;color&#x27;?</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ############################# Function Type Interfaces #######################</span></span><br><span class="line"><span class="keyword">interface</span> SearchFunc &#123;</span><br><span class="line">    (source: <span class="built_in">string</span>, substring: <span class="built_in">string</span>): <span class="built_in">boolean</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> mySearch: SearchFunc;</span><br><span class="line">mySearch = <span class="function"><span class="keyword">function</span>(<span class="params">source: <span class="built_in">string</span>, substring: <span class="built_in">string</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> result = source.search(substring);</span><br><span class="line">    <span class="keyword">return</span> result &gt; <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ############################# Indexable Type Interfaces #######################</span></span><br><span class="line"><span class="comment">// Supported index signatures: string and number.</span></span><br><span class="line"><span class="comment">// obj[numeric] must be a `subtype` of obj[string],</span></span><br><span class="line"><span class="comment">// numeric indexer is convert to a string before indexing into an object.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// string index signatures enforce that all properties match their return type.</span></span><br><span class="line"><span class="comment">// because it&#x27;s a powerful way to describe the &quot;dictionary&quot; pattern.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="keyword">interface</span> StringArray &#123;</span><br><span class="line">    [index: <span class="built_in">number</span>]: <span class="built_in">string</span>;</span><br><span class="line">    [index: <span class="built_in">string</span>]: <span class="built_in">string</span>;</span><br><span class="line">    length: <span class="built_in">number</span>; <span class="comment">// Error. The type of &#x27;length&#x27; isn&#x27;t subtype of string.</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> StringArray &#123;</span><br><span class="line">    [index: <span class="built_in">number</span>]: <span class="built_in">string</span> | <span class="built_in">number</span>;</span><br><span class="line">    [index: <span class="built_in">string</span>]: <span class="built_in">string</span>;</span><br><span class="line">    length: <span class="built_in">number</span>; <span class="comment">// OK.</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> StringArray &#123;</span><br><span class="line">    <span class="keyword">readonly</span> [index: <span class="built_in">number</span>]: <span class="built_in">string</span>; <span class="comment">// readonly index signatures.</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ############################# Class Types #######################</span></span><br><span class="line"><span class="comment">// * class has two sides: static side and instance side.</span></span><br><span class="line"><span class="comment">// * constructor sits in the static side.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> ClockConstructor &#123;</span><br><span class="line">    <span class="keyword">new</span> (hour: <span class="built_in">number</span>, minute: <span class="built_in">number</span>): ClockInterface;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> ClockInterface &#123;</span><br><span class="line">    tick(): <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> Clock: ClockConstructor = <span class="keyword">class</span> Clock <span class="keyword">implements</span> ClockInterface &#123;</span><br><span class="line">    <span class="keyword">constructor</span>(<span class="params">h: <span class="built_in">number</span>, m: <span class="built_in">number</span></span>) &#123;&#125;</span><br><span class="line">    tick() &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&quot;beep beep&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ############################# Extending Interfaces #######################</span></span><br><span class="line"><span class="comment">// * An interface can extend multiple interfaces, creating a combination of all of the interfaces.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> Shape &#123;</span><br><span class="line">    color: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> PenStroke &#123;</span><br><span class="line">    penWidth: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> Square <span class="keyword">extends</span> Shape, PenStroke &#123;</span><br><span class="line">    sideLength: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ############################# Hybrid Types #######################</span></span><br><span class="line"><span class="comment">// * object can act as both a function and an object, with additional properties.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> Counter &#123;</span><br><span class="line">    (start: <span class="built_in">number</span>): <span class="built_in">string</span>;</span><br><span class="line">    interval: <span class="built_in">number</span>;</span><br><span class="line">    reset(): <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getCounter</span>(<span class="params"></span>): <span class="title">Counter</span> </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> counter = <span class="function"><span class="keyword">function</span>(<span class="params">start: <span class="built_in">number</span></span>) </span>&#123;&#125; <span class="keyword">as</span> Counter;</span><br><span class="line">    counter.interval = <span class="number">123</span>;</span><br><span class="line">    counter.reset = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;;</span><br><span class="line">    <span class="keyword">return</span> counter;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ############################# Interfaces Extending Classes #######################</span></span><br><span class="line"><span class="comment">// Interface extends a class type&#x27;s members even protected and privated, but not their implementations.</span></span><br></pre></td></tr></table></figure>

<h2 id="Functions"><a href="#Functions" class="headerlink" title="Functions"></a>Functions</h2><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// ################Writing the function type:</span></span><br><span class="line"><span class="comment">// ################(baseValue: number, increment: number) =&gt; number###############################</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> myAdd: <span class="function">(<span class="params">baseValue: <span class="built_in">number</span>, increment: <span class="built_in">number</span></span>) =&gt;</span> <span class="built_in">number</span> = <span class="function"><span class="keyword">function</span>(<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">    x: <span class="built_in">number</span>,</span></span></span><br><span class="line"><span class="function"><span class="params">    y: <span class="built_in">number</span></span></span></span><br><span class="line"><span class="function"><span class="params"></span>): <span class="title">number</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x + y;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> myAdd2: <span class="function">(<span class="params">baseValue: <span class="built_in">number</span>, increment: <span class="built_in">number</span></span>) =&gt;</span> <span class="built_in">number</span> = <span class="function"><span class="keyword">function</span>(<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x + y;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ###############################Optional and Default Parameters###############################</span></span><br><span class="line"><span class="comment">// * Any optional parameters must follow required parameters.</span></span><br><span class="line"><span class="comment">// * Default initialized parameters don&#x27;t need to occur after required parameters.</span></span><br><span class="line"><span class="comment">//   `Trailing`default parameters will share commonality with optional parameters.</span></span><br><span class="line"><span class="comment">//   (firstName: string, lastName?: string) =&gt; string;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">buildName</span>(<span class="params">firstName: <span class="built_in">string</span>, lastName?: <span class="built_in">string</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (lastName) <span class="keyword">return</span> firstName + <span class="string">&quot; &quot;</span> + lastName;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">return</span> firstName;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">buildName</span>(<span class="params">firstName: <span class="built_in">string</span>, lastName = &quot;Smith&quot;</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> firstName + <span class="string">&quot; &quot;</span> + lastName;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">buildName</span>(<span class="params">firstName = &quot;Will&quot;, lastName: <span class="built_in">string</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> firstName + <span class="string">&quot; &quot;</span> + lastName;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> result = buildName(<span class="literal">undefined</span>, <span class="string">&quot;Adams&quot;</span>); <span class="comment">// return &quot;Will Adams&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ###############################Rest Parameters###############################</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">buildName</span>(<span class="params">firstName: <span class="built_in">string</span>, ...restOfName: <span class="built_in">string</span>[]</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> firstName + <span class="string">&quot; &quot;</span> + restOfName.join(<span class="string">&quot; &quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> employeeName = buildName(<span class="string">&quot;Joseph&quot;</span>, <span class="string">&quot;Samuel&quot;</span>, <span class="string">&quot;Lucas&quot;</span>, <span class="string">&quot;Mackinzie&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ###############################this###############################</span></span><br><span class="line"><span class="comment">// this and arrow functions</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> deck = &#123;</span><br><span class="line">  suits: [<span class="string">&quot;hearts&quot;</span>, <span class="string">&quot;spades&quot;</span>, <span class="string">&quot;clubs&quot;</span>, <span class="string">&quot;diamonds&quot;</span>],</span><br><span class="line">  cards: <span class="built_in">Array</span>(<span class="number">52</span>),</span><br><span class="line">  createCardPicker: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">let</span> pickedCard = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * <span class="number">52</span>);</span><br><span class="line">      <span class="keyword">let</span> pickedSuit = <span class="built_in">Math</span>.floor(pickedCard / <span class="number">13</span>);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">return</span> &#123; suit: <span class="built_in">this</span>.suits[pickedSuit], card: pickedCard % <span class="number">13</span> &#125;; <span class="comment">// error, this isn&#x27;t deck object.</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> cardPicker = deck.createCardPicker();</span><br><span class="line"><span class="keyword">let</span> pickedCard = cardPicker();</span><br><span class="line">alert(<span class="string">&quot;card: &quot;</span> + pickedCard.card + <span class="string">&quot; of &quot;</span> + pickedCard.suit);</span><br><span class="line"></span><br><span class="line"><span class="comment">//##############################################################</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> Card &#123;</span><br><span class="line">    suit: <span class="built_in">string</span>;</span><br><span class="line">    card: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> Deck &#123;</span><br><span class="line">    suits: <span class="built_in">string</span>[];</span><br><span class="line">    cards: <span class="built_in">number</span>[];</span><br><span class="line">    createCardPicker(<span class="built_in">this</span>: Deck): <span class="function">() =&gt;</span> Card;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> deck: Deck = &#123;</span><br><span class="line">  suits: [<span class="string">&quot;hearts&quot;</span>, <span class="string">&quot;spades&quot;</span>, <span class="string">&quot;clubs&quot;</span>, <span class="string">&quot;diamonds&quot;</span>],</span><br><span class="line">  cards: <span class="built_in">Array</span>(<span class="number">52</span>),</span><br><span class="line"></span><br><span class="line">  <span class="comment">// this parameters are `fake` parameters that come first in the parameter list of a function.</span></span><br><span class="line">  <span class="comment">// <span class="doctag">NOTE:</span> the line below is now an arrow function, allowing us to capture &#x27;this&#x27; right here</span></span><br><span class="line">  <span class="comment">// * The downside is arrow function is created per object.</span></span><br><span class="line">  createCardPicker: <span class="function"><span class="keyword">function</span> (<span class="params"><span class="built_in">this</span>: Deck</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> pickedCard = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * <span class="number">52</span>);</span><br><span class="line">      <span class="keyword">let</span> pickedSuit = <span class="built_in">Math</span>.floor(pickedCard / <span class="number">13</span>);</span><br><span class="line">      <span class="keyword">return</span> &#123; suit: <span class="built_in">this</span>.suits[pickedSuit], card: pickedCard % <span class="number">13</span> &#125;; <span class="comment">// ok, this is deck object.</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> cardPicker = deck.createCardPicker();</span><br><span class="line"><span class="keyword">let</span> pickedCard = cardPicker();</span><br><span class="line">alert(<span class="string">&quot;card: &quot;</span> + pickedCard.card + <span class="string">&quot; of &quot;</span> + pickedCard.suit);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ###############################Overloads###############################</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">pickCard</span>(<span class="params">x: &#123; suit: <span class="built_in">string</span>; card: <span class="built_in">number</span> &#125;[]</span>): <span class="title">number</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">pickCard</span>(<span class="params">x: <span class="built_in">number</span></span>): </span>&#123; suit: <span class="built_in">string</span>; card: <span class="built_in">number</span> &#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="Literal-Types"><a href="#Literal-Types" class="headerlink" title="Literal Types"></a>Literal Types</h2><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// ###############################String Literal Types###############################</span></span><br><span class="line"><span class="comment">// String literal combine nicely with `union types`, `type guards`, and `type aliases`.</span></span><br><span class="line"><span class="comment">// Numeric literal types which act the same as the string literals.</span></span><br><span class="line"><span class="comment">// Boolean literal types which might be used to constrain object values.</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Easing = <span class="string">&quot;ease-in&quot;</span> | <span class="string">&quot;ease-out&quot;</span> | <span class="string">&quot;ease-in-out&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> UIElement &#123;</span><br><span class="line">    animate(dx: <span class="built_in">number</span>, dy: <span class="built_in">number</span>, easing: Easing) &#123;</span><br><span class="line">        <span class="keyword">if</span> (easing === <span class="string">&quot;easing-in&quot;</span>) &#123;</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (easing === <span class="string">&quot;easing-out&quot;</span>) &#123;</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (easing === <span class="string">&quot;easing-in-out&quot;</span>) &#123;</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> button = <span class="keyword">new</span> UIElement();</span><br><span class="line">button.animate(<span class="number">0</span>, <span class="number">0</span>, <span class="string">&quot;ease-in&quot;</span>);</span><br><span class="line">button.animate(<span class="number">0</span>, <span class="number">0</span>, <span class="string">&quot;uneasy&quot;</span>);</span><br><span class="line"><span class="comment">// Error. Argument of type &#x27;&quot;uneasy&quot;&#x27; is not assignable to parameter of type &#x27;Easing&#x27;.</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createElement</span>(<span class="params">tagName: &quot;img&quot;</span>): <span class="title">HTMLImageElement</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createElement</span>(<span class="params">tagName: &quot;input&quot;</span>): <span class="title">HTMLInputElement</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createElement</span>(<span class="params">tagName: <span class="built_in">string</span></span>): <span class="title">Element</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ###############################Numeric###############################</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">rollDice</span>(<span class="params"></span>): 1 | 2 </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (<span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * <span class="number">6</span>) + <span class="number">1</span>) <span class="keyword">as</span> <span class="number">1</span> | <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ###############################Boolean###############################</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> ValidationSuccess &#123;</span><br><span class="line">    isValid: <span class="literal">true</span>;</span><br><span class="line">    reason: <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> ValidationFailure &#123;</span><br><span class="line">    isValid: <span class="literal">false</span>;</span><br><span class="line">    reason: <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="Unions-and-Intersection-Types"><a href="#Unions-and-Intersection-Types" class="headerlink" title="Unions and Intersection Types"></a>Unions and Intersection Types</h2><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// ###############################Unions###############################</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">padLeft</span>(<span class="params">value: <span class="built_in">string</span>, padding: <span class="built_in">string</span> | <span class="built_in">number</span></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ###############################Unions with Common Fields###############################</span></span><br><span class="line"><span class="keyword">interface</span> Bird &#123;</span><br><span class="line">    fly(): <span class="built_in">void</span>;</span><br><span class="line">    layEggs(): <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> Fish &#123;</span><br><span class="line">    swim(): <span class="built_in">void</span>;</span><br><span class="line">    layEggs(): <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">declare</span> <span class="function"><span class="keyword">function</span> <span class="title">getSmallPet</span>(<span class="params"></span>): <span class="title">Fish</span> | <span class="title">Bird</span></span>;</span><br><span class="line"><span class="keyword">let</span> pet = getSmallPet();</span><br><span class="line">pet.layEggs(); <span class="comment">// OK.</span></span><br><span class="line">pet.swim();</span><br><span class="line"><span class="comment">// Error.</span></span><br><span class="line"><span class="comment">// Property &#x27;swim&#x27; does not exist on type &#x27;Bird | Fish&#x27;.</span></span><br><span class="line"><span class="comment">// Property &#x27;swim&#x27; does not exist on type &#x27;Bird&#x27;.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ###############################Discriminating Unions###############################</span></span><br><span class="line"><span class="comment">// Discriminating Unions by adding a single shared field.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ###############################Intersection Types###############################</span></span><br><span class="line"><span class="comment">// An intersection type combines multiple types into one which have all members of all other types.</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="Classes"><a href="#Classes" class="headerlink" title="Classes"></a>Classes</h2><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// * Derived class that contains a constructor function must call `super()`</span></span><br><span class="line"><span class="comment">//   which will execute the constructor of the base class.</span></span><br><span class="line"><span class="comment">// * before we ever access a property on this in a constructor body,</span></span><br><span class="line"><span class="comment">//   we have to call `super()`.</span></span><br><span class="line"><span class="comment">// * members are public by default.</span></span><br><span class="line"><span class="comment">// * `#member`/`private member: type` is private fields.</span></span><br><span class="line"><span class="comment">// * Parameter properties let you create and initialize a member in one place.</span></span><br><span class="line"><span class="comment">//   `constructor(accessibility modifier or readonly member: type)`</span></span><br><span class="line"><span class="comment">// * Accessors require you to set the compiler output ECMAScript 5 or higher.</span></span><br><span class="line"><span class="comment">//   Accessors with a set and no set are automatically inferred to be readonly.</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> Animal &#123;</span><br><span class="line">    <span class="keyword">public</span> name: <span class="built_in">string</span>;</span><br><span class="line">    #color: <span class="built_in">string</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// public by default.</span></span><br><span class="line">    <span class="keyword">constructor</span>(<span class="params">theName: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = theName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    move(distanceInMeters: <span class="built_in">number</span>) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;<span class="built_in">this</span>.name&#125;</span> moved <span class="subst">$&#123;distanceInMeters&#125;</span>m.`</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> Horse <span class="keyword">extends</span> Animal &#123;</span><br><span class="line">    <span class="keyword">constructor</span>(<span class="params">name: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">        <span class="built_in">super</span>(name);</span><br><span class="line">    &#125;</span><br><span class="line">    move(distanceInMeters = <span class="number">45</span>) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&quot;Galloping...&quot;</span>);</span><br><span class="line">        <span class="built_in">super</span>.move(distanceInMeters);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ############################Static Properties#############################</span></span><br><span class="line"><span class="comment">// Grid.x not Grid::x</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> Grid &#123;</span><br><span class="line">    <span class="keyword">static</span> origin = &#123; x: <span class="number">0</span>, y: <span class="number">0</span>&#125;;</span><br><span class="line"></span><br><span class="line">    calculateDistanceFromOrigin(point: &#123; x: <span class="built_in">number</span>, y: <span class="built_in">number</span> &#125;) &#123;</span><br><span class="line">        <span class="keyword">let</span> xDist = point.x - Grid.origin.x;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ############################Abstract Classes#############################</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">abstract</span> <span class="keyword">class</span> Animal &#123;</span><br><span class="line">    <span class="keyword">abstract</span> makeSound(): <span class="built_in">void</span>;</span><br><span class="line"></span><br><span class="line">    move(): <span class="built_in">void</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&quot;roaming the earth...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ############################Constructor Functions#############################</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> Greeter &#123;</span><br><span class="line">    <span class="keyword">static</span> standardGreeting = <span class="string">&quot;Hello, there&quot;</span>;</span><br><span class="line">    greeting: <span class="built_in">string</span>;</span><br><span class="line">    greet() &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span>.greeting) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;Hello, &quot;</span> + <span class="built_in">this</span>.greeting;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> Greeter.standardGreeting;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> greeter1: Greeter;</span><br><span class="line">greeter1 = <span class="keyword">new</span> Greeter();</span><br><span class="line"><span class="built_in">console</span>.log(greeter1.greet()); <span class="comment">// &quot;Hello, there&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// greeterMaker holds its constructor function.</span></span><br><span class="line"><span class="comment">// and contain all of the static members of Greeter along with</span></span><br><span class="line"><span class="comment">// the constructor that creates instances of the Greeter class.</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> greeterMaker: <span class="keyword">typeof</span> Greeter = Greeter;</span><br><span class="line">greeterMaker.standardGreeting = <span class="string">&quot;Hey, there&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> greeter2: Greeter = <span class="keyword">new</span> greeterMaker();</span><br><span class="line"><span class="built_in">console</span>.log(greeter2.greet()); <span class="comment">// &quot;Hey, there&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> greeter3: Greeter;</span><br><span class="line">greeter3 = <span class="keyword">new</span> Greeter();</span><br><span class="line"><span class="built_in">console</span>.log(greeter3.greet()); <span class="comment">// &quot;Hey, there&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// JavaScript created by the above example</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> Greeter = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">Greeter</span>(<span class="params">message</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.greeting = message;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Greeter.prototype.greet = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Hello, &quot;</span> + <span class="built_in">this</span>.greeting;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> Greeter;</span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line"><span class="comment">// ############################Using a class as an interface#############################</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="Enums"><a href="#Enums" class="headerlink" title="Enums"></a>Enums</h2><ul>
<li>Enum members also become types as well.</li>
<li>Enum themselves effectively become a union of each enum member.</li>
</ul>
<h3 id="Numeric-Enums"><a href="#Numeric-Enums" class="headerlink" title="Numeric Enums"></a>Numeric Enums</h3><ul>
<li>Numeric enums can be mixed in computed and constant members.</li>
<li>Enums without initializers either need to be first and come after numeric.</li>
<li>Numeric enums members also get a <code>reverse mapping</code> from enum values to enum names.</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">enum</span> E &#123;</span><br><span class="line">    A = getSomeValue(),</span><br><span class="line">    B, <span class="comment">// Error.</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Enums-at-runtime"><a href="#Enums-at-runtime" class="headerlink" title="Enums at runtime"></a>Enums at runtime</h3><ul>
<li>Enums are real objects that exists at runtime.</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">enum</span> E &#123;</span><br><span class="line">    X,</span><br><span class="line">    Y,</span><br><span class="line">    Z,</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">obj: &#123; X: <span class="built_in">number</span> &#125;</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> obj.X;</span><br><span class="line">&#125;</span><br><span class="line">f(E); <span class="comment">// Works, since &#x27;E&#x27; has a property named &#x27;X&#x27; which is a number.</span></span><br></pre></td></tr></table></figure>

<h3 id="Enums-at-compile-time"><a href="#Enums-at-compile-time" class="headerlink" title="Enums at compile time"></a>Enums at compile time</h3><ul>
<li><code>keyof typeof</code> get a <code>Type</code> that represents all Enum keys as strings.</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">enum</span> E &#123;</span><br><span class="line">    X,</span><br><span class="line">    Y,</span><br><span class="line">    Z,</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * This is equivalent to:</span></span><br><span class="line"><span class="comment"> * type EStrings = &#x27;X&#x27; | &#x27;Y&#x27; | &#x27;Z&#x27;;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">type</span> EStings = keyof <span class="keyword">typeof</span> E;</span><br></pre></td></tr></table></figure>

<h3 id="const-Enums"><a href="#const-Enums" class="headerlink" title="const Enums"></a>const Enums</h3><ul>
<li>const enum are removed during compilation.</li>
<li>const enum members are inlined at use sites.</li>
<li>const enum cannot have computed members.</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="built_in">enum</span> Direction &#123;</span><br><span class="line">    Up,</span><br><span class="line">    Down,</span><br><span class="line">    Left,</span><br><span class="line">    Right,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> directions = [</span><br><span class="line">    Direction.Up,</span><br><span class="line">    Direction.Down,</span><br><span class="line">    Direction.Left,</span><br><span class="line">    Direction.Right,</span><br><span class="line">];</span><br></pre></td></tr></table></figure>

<h2 id="Generic"><a href="#Generic" class="headerlink" title="Generic"></a>Generic</h2><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Generic functions</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">identity</span>&lt;<span class="title">T</span>&gt;(<span class="params">arg: T</span>): <span class="title">T</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> arg;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">identify</span>&lt;<span class="title">T</span>&gt;(<span class="params">arg: T</span>): <span class="title">T</span> </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(arg.length); <span class="comment">// Error. Not like C++</span></span><br><span class="line">    <span class="keyword">return</span> arg;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Generic Interface</span></span><br><span class="line"><span class="keyword">interface</span> GenericIdentityFn&lt;T&gt; &#123;</span><br><span class="line">    (arg: T): T;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">identity</span>&lt;<span class="title">T</span>&gt;(<span class="params">arg: T</span>): <span class="title">T</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> arg;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> myIdentity: GenericIdentityFn&lt;<span class="built_in">number</span>&gt; = identity;</span><br></pre></td></tr></table></figure>

<h3 id="Generic-Classes"><a href="#Generic-Classes" class="headerlink" title="Generic Classes"></a>Generic Classes</h3><ul>
<li>Generic classes are only generic over their instance side rather that their static side.</li>
</ul>
<h3 id="Generic-Constraints"><a href="#Generic-Constraints" class="headerlink" title="Generic Constraints"></a>Generic Constraints</h3><ul>
<li><code>&lt;T extends Interface&gt;</code> add constraint to generic.</li>
<li><code>&lt;T, K extends keyof T&gt;</code> add constraints by another type parameter.</li>
<li>When using <code>class in generic</code>, it’s necessary to refer to class types by their <code>constructor</code> function.<br>the prototype property is related to constructor function because of generated JavaScript code.</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> Lengthwise &#123;</span><br><span class="line">    length: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">loggingIdentity</span>&lt;<span class="title">T</span> <span class="title">extends</span> <span class="title">Lengthwise</span>&gt;(<span class="params">arg: T</span>): <span class="title">T</span> </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(arg.length); <span class="comment">// OK.</span></span><br><span class="line">    <span class="keyword">return</span> arg;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p><a target="_blank" rel="noopener" href="https://www.typescriptlang.org/docs/handbook/intro.html">The TypeScript Handbook</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://zerobit.ga/2020/11/20/fontend/typescript/" data-id="ckofhdl9q002jd0vv89g85iow" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-network/tcp_ip_osi_model" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/10/10/network/tcp_ip_osi_model/" class="article-date">
  <time datetime="2020-10-09T16:00:00.000Z" itemprop="datePublished">2020-10-10</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Network/">Network</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/10/10/network/tcp_ip_osi_model/">TCP/IP vs OSI Model</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="OSI-Model"><a href="#OSI-Model" class="headerlink" title="OSI Model"></a>OSI Model</h2><p><code>The Open System Interconnection(OSI)</code><br>defines a logical network and effectively describes computer packet transfer by using various layers of protocols.</p>
<h2 id="TCP-IP-Model"><a href="#TCP-IP-Model" class="headerlink" title="TCP/IP Model"></a>TCP/IP Model</h2><p>TCP/IP stands for <code>Transmission Control Protocol/Internet Protocol</code>.<br>It is specifically designed as a model to offer highly reliable and end-to-end byte stream over an unreliable internetwork.</p>
<h2 id="Characteristic-And-Difference"><a href="#Characteristic-And-Difference" class="headerlink" title="Characteristic And Difference"></a>Characteristic And Difference</h2><p><img src="/images/TCPIPvsOSIM.png" alt="TCP/IPvsOSI.png"></p>
<ol>
<li><p>Physical: Hardware transmits signals over media. (e.g. cable, RJ45)</p>
</li>
<li><p>Data Link: Binary to signals and vice versa. (e.g. MAC, ARP, switches)</p>
</li>
<li><p>Network: Packet-Forwarding, Routing, and Addressing. (e.g. IP, DNS, routers)</p>
</li>
<li><p>Transport: Error-Checking and Data-Recovery. (e.g. TCP, UDP, port numbers)</p>
</li>
<li><p>Session: Establish and terminate connections between devices. (e.g. Syn/Ack)</p>
</li>
<li><p>Presentation: Translate application formatting to network formatting and vice versa. (e.g. encryption, ASCII, PNG, MIDI)</p>
</li>
<li><p>Application: User Interact. Browser, Skype, Outlook. (e.g. SNMP, HTTP, FTP)</p>
</li>
</ol>
<p>One popular mnemonic, starting with Layer7, is “All People Seem To Need Data Processing”.<br>The other one start with Layer1, is “Please Do Not Throw Sausage Pizza Away”.</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ol>
<li><p><a target="_blank" rel="noopener" href="https://www.guru99.com/difference-tcp-ip-vs-osi-model.html">TCP/IP vs OSI Model: What’s the Difference?</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://www.plixer.com/blog/network-layers-explained">The Network Layers Explained</a></p>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://zerobit.ga/2020/10/10/network/tcp_ip_osi_model/" data-id="ckofhdl8v000xd0vve2nq1ipi" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-windows/batch" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/09/24/windows/batch/" class="article-date">
  <time datetime="2020-09-23T16:00:00.000Z" itemprop="datePublished">2020-09-24</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Windows/">Windows</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/09/24/windows/batch/">Batch Script</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><code>echo off</code> command to ensure that the commands are not shown when the code is executed.<br><code>@echo off</code> makes the command apply to itself as well.</p>
<h2 id="Command-Line-Arguments"><a href="#Command-Line-Arguments" class="headerlink" title="Command Line Arguments"></a>Command Line Arguments</h2><p>command line arguments can be accessed by <code>%1</code>, <code>%2</code>, <code>%3</code> till <code>%9</code>. But we can use<br><code>SHIFT</code> command to overcome this limitation.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">:Loop</span><br><span class="line">IF &quot;%1%&#x3D;&#x3D;&quot;&quot; GOTO :Continue</span><br><span class="line">    echo %1%</span><br><span class="line">SHIFT</span><br><span class="line">GOTO :Loop</span><br><span class="line">:Continue</span><br></pre></td></tr></table></figure>

<h2 id="Set-Command"><a href="#Set-Command" class="headerlink" title="Set Command"></a>Set Command</h2><p>syntax:</p>
<figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> /A variable=value</span><br><span class="line"></span><br><span class="line"><span class="built_in">set</span> message=Hello World</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">%message%</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">set</span> /A a=<span class="number">1</span></span><br><span class="line"><span class="built_in">set</span> /A b=<span class="number">2</span></span><br><span class="line"><span class="built_in">set</span> /A c=<span class="variable">%a%</span>+<span class="variable">%b%</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">set</span> global=global variable</span><br><span class="line"><span class="built_in">setlocal</span></span><br><span class="line"><span class="built_in">set</span> local=local variable</span><br><span class="line"><span class="built_in">endlocal</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><code>set</code> command can be used to initialize a variable.</p>
<p><code>/A</code> is used if the valuee needs to be numeric in nature.</p>
<p><code>%</code> sign has to be used to reference a variable.</p>
<p><code>setlocal</code> command to make variables local to the scope of your script.<br>any variable assignments revert upon calling <code>endlocal</code>, <code>exit</code>, or execution<br>reaches the end of file(EOF) in your script.</p>
<p><code>setlocal</code> command is first used to ensure the command processor takes a backup of all environment variables.<br><code>endlocal</code> is automatically called when the end of the batch file is reached, i.e. by calling GOTO:EOF</p>
<h2 id="Environment-Variables"><a href="#Environment-Variables" class="headerlink" title="Environment Variables"></a>Environment Variables</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo %OS%</span><br></pre></td></tr></table></figure>

<p><code>%</code> sign has to be used to reference a environment variables.</p>
<h2 id="Comments"><a href="#Comments" class="headerlink" title="Comments"></a>Comments</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rem this is rem comments.</span><br><span class="line">::  this is :: comments.</span><br></pre></td></tr></table></figure>

<p><code>rem</code> is a command so it will slow down the code.</p>
<h2 id="String"><a href="#String" class="headerlink" title="String"></a>String</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">set message&#x3D;Hello World</span><br><span class="line"></span><br><span class="line">:: empty string.</span><br><span class="line"></span><br><span class="line">set a&#x3D;</span><br><span class="line"></span><br><span class="line">:: check existence of empty string.</span><br><span class="line">:: To Check for existence of an empty string, you need to encompass the variable name in square brackets</span><br><span class="line">:: and also compare it against a value in square brackets as shown in the example.</span><br><span class="line"></span><br><span class="line">if [%a%]&#x3D;&#x3D;[] echo &quot;string a is empty&quot;</span><br><span class="line"></span><br><span class="line">:: interpolation</span><br><span class="line">:: concatenation</span><br><span class="line"></span><br><span class="line">set a&#x3D;hello</span><br><span class="line">set b&#x3D;world</span><br><span class="line">set &#x2F;A c&#x3D;50</span><br><span class="line">set d&#x3D;%a% and %b% plus %c%</span><br><span class="line">echo %d%</span><br><span class="line"></span><br><span class="line">:: string length. there is no length function defined for finding the length of a string.</span><br><span class="line"></span><br><span class="line">@echo off</span><br><span class="line">set src&#x3D;hello world</span><br><span class="line">call :strlen src strlen</span><br><span class="line">echo string is %strlen% characters long.</span><br><span class="line">exit &#x2F;b</span><br><span class="line"></span><br><span class="line">:strlen</span><br><span class="line">setlocal enabledelayedexpansion</span><br><span class="line"></span><br><span class="line">:strLen_Loop</span><br><span class="line">    if not &quot;!%1:~%len%!&quot;&#x3D;&#x3D;&quot;&quot; set &#x2F;A len+&#x3D;1 &amp; goto :strLen_Loop</span><br><span class="line">(endlocal &amp; set %2&#x3D;%len%)</span><br><span class="line">goto :eof</span><br><span class="line"></span><br><span class="line">:: string to int. var is 12350 after calculation.</span><br><span class="line"></span><br><span class="line">set var&#x3D;12345</span><br><span class="line">set &#x2F;A var&#x3D;%var% + 5</span><br><span class="line">echo %var%</span><br><span class="line"></span><br><span class="line">:: sub string. the index value can be negative.</span><br><span class="line"></span><br><span class="line">%variable:~num_chars_to_skip%</span><br><span class="line">%variable:~num_chars_to_skip,num_chars_to_keep%</span><br><span class="line">%variable:~-num_chars_to_skip,-num_chars_to_keep%</span><br><span class="line"></span><br><span class="line">set x&#x3D;1000</span><br><span class="line">set y&#x3D;1</span><br><span class="line">set y&#x3D;%y%</span><br><span class="line">echo %x%</span><br><span class="line"></span><br><span class="line">set y&#x3D;%y:~-4%</span><br><span class="line">echo %y%</span><br><span class="line"></span><br><span class="line">rem output will be</span><br><span class="line">1000</span><br><span class="line">1</span><br><span class="line"></span><br><span class="line">:: string remove sub string. syntax: %src:stringtoberemoved&#x3D;%</span><br><span class="line">:: string replace string. syntas: %src:stringtobereplaced&#x3D;replacestring%</span><br><span class="line"></span><br><span class="line">set src&#x3D;The parent of substring</span><br><span class="line">echo %src%</span><br><span class="line">set src&#x3D;%src:substring&#x3D;%</span><br><span class="line">echo %src%</span><br><span class="line"></span><br><span class="line">set src&#x3D;Spaces need to be removed</span><br><span class="line">set src&#x3D;%src:&#x3D;%</span><br><span class="line">echo src</span><br><span class="line"></span><br><span class="line">:: left sub index.</span><br><span class="line">:: right sub index.</span><br><span class="line"></span><br><span class="line">set src&#x3D;This message needs changed.</span><br><span class="line">echo %src%</span><br><span class="line">set src_left&#x3D;%src:~4%</span><br><span class="line">echo %src_left%</span><br><span class="line">set src_right&#x3D;%src:~-8%</span><br><span class="line">echo %src_right%</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="Array"><a href="#Array" class="headerlink" title="Array"></a>Array</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">:: An array is created by using the following two ways.</span><br><span class="line"></span><br><span class="line">set a[0]&#x3D;1</span><br><span class="line">set a[1]&#x3D;1</span><br><span class="line">echo %a[0]%</span><br><span class="line"></span><br><span class="line">set list &#x3D; 1 2 3 4</span><br><span class="line">(for %%a in (%list%) do (</span><br><span class="line">    echo %%a</span><br><span class="line">))</span><br><span class="line"></span><br><span class="line">:: Length of an Array</span><br><span class="line"></span><br><span class="line">set Arr[0]&#x3D;1</span><br><span class="line">set Arr[1]&#x3D;2</span><br><span class="line">set Arr[2]&#x3D;3</span><br><span class="line">set Arr[3]&#x3D;4</span><br><span class="line">set &quot;x&#x3D;0&quot;</span><br><span class="line">:SymLoop</span><br><span class="line"></span><br><span class="line">if defined Arr[%x%] (</span><br><span class="line">    call echo %%Arr[%x%]%%</span><br><span class="line">    set &#x2F;a &quot;x+&#x3D;1&quot;</span><br><span class="line">    GOTO :SymLoop</span><br><span class="line">)</span><br><span class="line">echo &quot;The length of the array is&quot; %x%</span><br><span class="line"></span><br><span class="line">:: Create Structures in Arrays(TODO: ?)</span><br><span class="line"></span><br><span class="line">set len &#x3D; 3</span><br><span class="line">set obj[0].Name &#x3D; Joe</span><br><span class="line">set obj[0].ID &#x3D; 1</span><br><span class="line">set obj[1].Name &#x3D; Mark</span><br><span class="line">set obj[1].ID &#x3D; 2</span><br><span class="line">set obj[2].Name &#x3D; Mohan</span><br><span class="line">set obj[2].ID &#x3D; 3</span><br><span class="line">set i &#x3D; 0</span><br><span class="line">:loop</span><br><span class="line"></span><br><span class="line">if %i% equ %len% goto :eof</span><br><span class="line">set cur.Name&#x3D;</span><br><span class="line">set cur.ID&#x3D;</span><br><span class="line"></span><br><span class="line">for &#x2F;f &quot;usebackq delims&#x3D;&#x3D;.tokens&#x3D;1-3&quot; %%j in (&#96;set obj[%i%]&#96;) do (</span><br><span class="line">   set cur.%%k&#x3D;%%l</span><br><span class="line">)</span><br><span class="line">echo Name &#x3D; %cur.Name%</span><br><span class="line">echo Value &#x3D; %cur.ID%</span><br><span class="line">set &#x2F;a i &#x3D; %i%+1</span><br><span class="line">goto loop</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="If-else"><a href="#If-else" class="headerlink" title="If/else"></a>If/else</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">:: &#96;if else&#96; code is placed in the brackets().</span><br><span class="line"></span><br><span class="line">If (condition) (do_something)</span><br><span class="line">ELSE (do_something_else)</span><br><span class="line"></span><br><span class="line">:: if defined, which is used to test for the existence of a variable.</span><br><span class="line">:: if exist, which is used to test for the existence of a file.</span><br><span class="line"></span><br><span class="line">set str1&#x3D;string1</span><br><span class="line">if defined str1 echo &quot;variable str1 is defined&quot;</span><br><span class="line"></span><br><span class="line">if exist C:\set2.txt echo &quot;File exists&quot;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="Operators"><a href="#Operators" class="headerlink" title="Operators"></a>Operators</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">:: Arithmetic Operators</span><br><span class="line">:: +, -, *, &#x2F;, %</span><br><span class="line"></span><br><span class="line">:: Relational Operators</span><br><span class="line">:: EQU, NEQ, LSS, LEQ, GTR, GEQ</span><br><span class="line"></span><br><span class="line">:: Logical Operators</span><br><span class="line">:: AND, OR, NOT</span><br><span class="line"></span><br><span class="line">:: Assignment Operators</span><br><span class="line">:: +&#x3D;, -&#x3D;, *&#x3D;, &#x2F;&#x3D;, %&#x3D;</span><br><span class="line"></span><br><span class="line">:: Bitwise Operators</span><br><span class="line">:: &amp; bitwise &quot;and&quot;</span><br><span class="line">:: | bitwise &quot;or&quot;</span><br><span class="line">:: ^ bitwise &quot;xor&quot; or exclusive or operator</span><br></pre></td></tr></table></figure>

<h2 id="DATE-amp-TIME"><a href="#DATE-amp-TIME" class="headerlink" title="DATE &amp; TIME"></a>DATE &amp; TIME</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">:: format date time(TODO: ?)</span><br><span class="line">@echo off</span><br><span class="line">echo&#x2F;Today is: %year%-%month%-%day%</span><br><span class="line">goto :EOF</span><br><span class="line">setlocal ENABLEEXTENSIONS</span><br><span class="line">set t &#x3D; 2&amp;if &quot;%date%z&quot; LSS &quot;A&quot; set t &#x3D; 1</span><br><span class="line"></span><br><span class="line">for &#x2F;f &quot;skip&#x3D;1 tokens &#x3D; 2-4 delims &#x3D; (-)&quot; %%a in (&#39;echo&#x2F;^|date&#39;) do (</span><br><span class="line">   for &#x2F;f &quot;tokens &#x3D; %t%-4 delims&#x3D;.-&#x2F; &quot; %%d in (&#39;date&#x2F;t&#39;) do (</span><br><span class="line">      set %%a&#x3D;%%d&amp;set %%b&#x3D;%%e&amp;set %%c&#x3D;%%f))</span><br><span class="line">endlocal&amp;set %1&#x3D;%yy%&amp;set %2&#x3D;%mm%&amp;set %3&#x3D;%dd%&amp;goto :EOF</span><br></pre></td></tr></table></figure>

<h2 id="Input-Output"><a href="#Input-Output" class="headerlink" title="Input/Output"></a>Input/Output</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">:: stdin is file 0; stdout is file 1; stderr is file 2;</span><br><span class="line">:: combine the stdout and stderr using the file number and the &#96;&amp;&#96; prefix.</span><br><span class="line"></span><br><span class="line">Dir C:\ &gt; list.txt</span><br><span class="line">Dir C:\ 2&gt; list.txt</span><br><span class="line">Dir C:\ &gt; list.txt 2&gt;&amp;1</span><br><span class="line"></span><br><span class="line">:: stdin. To work with the stdin, you have to use a workaround to archieve this.</span><br><span class="line">:: This can be done by redirecting the command prompt&#39;s own stdin, called &#96;CON&#96;.</span><br><span class="line">TYPE CON &gt; list.txt</span><br></pre></td></tr></table></figure>

<h2 id="Return-Code"><a href="#Return-Code" class="headerlink" title="Return Code"></a>Return Code</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">:: ERRORLEVEL contains the return code of the last executed program or script.</span><br><span class="line"></span><br><span class="line">IF %ERRORLEVEL% NEQ 0 (</span><br><span class="line">    do_something</span><br><span class="line">)</span><br><span class="line">EXIT &#x2F;B %ERRORLEVEL% at the end of the batch file to return the error codes from the batch file.</span><br><span class="line">EXIT &#x2F;B 7</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="Loops"><a href="#Loops" class="headerlink" title="Loops"></a>Loops</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">:: while. There is no direct while statement available in Batch Script.</span><br><span class="line">:: But we can do an implementation of this loop very easily by using the if statement and labels.</span><br><span class="line"></span><br><span class="line">:label</span><br><span class="line">if (expression) (</span><br><span class="line">    do_something</span><br><span class="line">    increment counter</span><br><span class="line">    GOTO :label</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">set &#x2F;A index&#x3D;0</span><br><span class="line">set &#x2F;A count&#x3D;5</span><br><span class="line">:while</span><br><span class="line">if %index% leq %count% (</span><br><span class="line">    echo The value of index is %index%</span><br><span class="line">    set &#x2F;A index+&#x3D;1</span><br><span class="line">    GOTO :while</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">:: FOR statement. list implementations</span><br><span class="line">:: Syntax: FOR %%variable IN list DO ( do_something )</span><br><span class="line"></span><br><span class="line">FOR %%f IN (1 2 3 4 5) DO (</span><br><span class="line">    echo %%f</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">:: FOR statement. Looping through ranges.</span><br><span class="line">:: &#x2F;L switch is used to denote that the loop is used for iterating through ranges.</span><br><span class="line"></span><br><span class="line">FOR &#x2F;L %%variable IN (lowerlimit, increment, upperlimit) DO do_something</span><br><span class="line"></span><br><span class="line">FOR &#x2F;L %%x IN (0, 1, 5) DO echo %%x</span><br><span class="line"></span><br><span class="line">:: Classic Style For Loop</span><br><span class="line"></span><br><span class="line">set &#x2F;A i &#x3D; 0;</span><br><span class="line">:loop</span><br><span class="line"></span><br><span class="line">IF %i% equ 5 GOTO END</span><br><span class="line">echo The value of i is %i%</span><br><span class="line">set &#x2F;A i&#x3D;%i%+1</span><br><span class="line">GOTO :loop</span><br><span class="line"></span><br><span class="line">:END</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="Functions"><a href="#Functions" class="headerlink" title="Functions"></a>Functions</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">:: Function is defined by label. Called by &#96;CALL&#96; keyword.</span><br><span class="line">:: Parameter is accessed by %~index</span><br><span class="line"></span><br><span class="line">SETLOCAL</span><br><span class="line">CALL :Display 5 10</span><br><span class="line">EXIT &#x2F;B %ERRORLEVEL%</span><br><span class="line"></span><br><span class="line">:Display</span><br><span class="line">echo The first parameter is %~1</span><br><span class="line">echo The second parameter is %~2</span><br><span class="line">EXIT &#x2F;B 0</span><br><span class="line"></span><br><span class="line">:: Return value is implemented by simply passing variables names which will hold the return values.</span><br><span class="line">:: Remarks: There is no sign &#96;%&#96; before and after.</span><br><span class="line"></span><br><span class="line">SETLOCAL</span><br><span class="line">CALL :Display return_value</span><br><span class="line">echo %return_value%</span><br><span class="line"></span><br><span class="line">:Display</span><br><span class="line">set &quot;%~3&#x3D;15&quot;</span><br><span class="line"></span><br><span class="line">:: Local Variable can be used to avoid name conflicts and</span><br><span class="line">:: Keep variable changes local to the function.</span><br><span class="line"></span><br><span class="line">:: Following output will be &quot;Outer; Outer&quot;.</span><br><span class="line">:: The variable &quot;str&quot; is being localized in the function SetValue,</span><br><span class="line">:: Thus even though the str value is being returned back to the main function,</span><br><span class="line">:: The value of str in the main function will not be replaced.</span><br><span class="line"></span><br><span class="line">@echo off</span><br><span class="line">set str&#x3D;Outer</span><br><span class="line">@echo %str%</span><br><span class="line">CALL :SetValue str</span><br><span class="line">@echo %str%</span><br><span class="line"></span><br><span class="line">:SetValue</span><br><span class="line">SETLOCAL</span><br><span class="line">set str&#x3D;Inner</span><br><span class="line">set &quot;%~1&#x3D;%str%&quot;</span><br><span class="line">ENDLOCAL</span><br><span class="line">EXIT &#x2F;B 0</span><br><span class="line"></span><br><span class="line">:: Recursive Functions</span><br><span class="line"></span><br><span class="line">set &quot;fst&#x3D;0&quot;</span><br><span class="line">set &quot;fib&#x3D;1&quot;</span><br><span class="line">set &quot;limit&#x3D;10000000&quot;</span><br><span class="line">call :myFibo fib,%fst%,%limit%</span><br><span class="line">echo.The next Fibonacci number greater or equal %limit% is %fib%.</span><br><span class="line">echo.&amp;pause&amp;goto:eof</span><br><span class="line"></span><br><span class="line">:myFibo</span><br><span class="line">SETLOCAL</span><br><span class="line">set &#x2F;A &quot;Number1&#x3D;%~1&quot;</span><br><span class="line">set &#x2F;A &quot;Number2&#x3D;%~2&quot;</span><br><span class="line">set &#x2F;A &quot;Limit&#x3D;%~3&quot;</span><br><span class="line">set &#x2F;A &quot;Number3&#x3D;Number1+Number2&quot;</span><br><span class="line"></span><br><span class="line">IF &#x2F;i %NumberN% LSS %Limit% call :myFibo NumberN,%Number1%,%Limit%</span><br><span class="line"></span><br><span class="line">(ENDLOCAL</span><br><span class="line">    IF &quot;%~1&quot; NEQ &quot;&quot; Set &quot;%~1&#x3D;%NumberN%&quot;</span><br><span class="line">)GOTO:eof</span><br><span class="line"></span><br><span class="line">:: File I&#x2F;O operations</span><br><span class="line">:: Creating files; Deleting files;</span><br><span class="line"></span><br><span class="line">echo &quot;Hello&quot; &gt;C:\new.txt</span><br><span class="line"></span><br><span class="line">DEL [&#x2F;P] [&#x2F;F] [&#x2F;S] [&#x2F;Q] [&#x2F;A[[:]attributes]] names</span><br><span class="line"></span><br><span class="line">:: Writing files;</span><br><span class="line">:: Writing use &#96;&gt;&#96;</span><br><span class="line">:: Appending use &#96;&gt;&gt;&#96;</span><br><span class="line"></span><br><span class="line">DIR C:\ &gt;C:\write.txt</span><br><span class="line"></span><br><span class="line">echo &quot;This is the directory listing of C: Drive&quot; &gt;C:new.txt</span><br><span class="line">DIR C:\ &gt;&gt;C:\new.txt</span><br><span class="line"></span><br><span class="line">:: Reading files;</span><br><span class="line"></span><br><span class="line">FOR &#x2F;F &quot;token&#x3D;* delims&#x3D;&quot; %%x in (new.txt) DO echo %%x</span><br><span class="line"></span><br><span class="line">:: Renaming files;</span><br><span class="line"></span><br><span class="line">RENAME [drive:][path][directoryname1 | filename1] [directoryname2 | filename2]</span><br><span class="line"></span><br><span class="line">rename *.txt *.bak</span><br><span class="line">rename &quot;TESTA.txt&quot; &quot;TESTB.txt&quot;</span><br><span class="line"></span><br><span class="line">:: Moving files;</span><br><span class="line"></span><br><span class="line">MOVE [&#x2F;Y | &#x2F;-Y] [drive:][path]filename1[,...] destination</span><br><span class="line"></span><br><span class="line">:: Batch Scripts-Files Pipes</span><br><span class="line">:: The pipe operator (|) takes the output of one command and directs it into the input of another command.</span><br><span class="line"></span><br><span class="line">:: The following command sorts the contents of the directory C:\</span><br><span class="line">:: In this example, both commands start simultaneously, but then the sort command pauses untile it receives</span><br><span class="line">:: the dir command&#39;s output.</span><br><span class="line"></span><br><span class="line">DIR C:\ | sort</span><br><span class="line"></span><br><span class="line">:: The content of the file C:\new.txt are sent to the sort command through the pipe filter.</span><br><span class="line">TYPE C:\new.txt | sort</span><br><span class="line"></span><br><span class="line">:: The following command will first take all the files defined in C:\,</span><br><span class="line">:: then using the pipe command, will find all the files with the .txt entension.</span><br><span class="line">:: it will then take this output and print it to the file AllText.txt.</span><br><span class="line">DIR C:\ |  find &quot;txt&quot; &gt; AllText.txt</span><br><span class="line"></span><br><span class="line">:: Find the file names that include the string txt,</span><br><span class="line">:: and then displays them in one command prompt window at a time.</span><br><span class="line">DIR C:\ &#x2F;s &#x2F;b | find &quot;txt&quot; | more</span><br><span class="line"></span><br><span class="line">:: Create Folders</span><br><span class="line"></span><br><span class="line">MKDIR [drive:]path</span><br><span class="line">MD [drive:]path</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="Process"><a href="#Process" class="headerlink" title="Process"></a>Process</h2><p><code>TASKLIST</code> command can be used to get the list of currently running process.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">TASKLIST [&#x2F;S system [&#x2F;U username [&#x2F;P [password]]]] [&#x2F;M [module] | &#x2F;SVC | &#x2F;V] [&#x2F;FI filter] [&#x2F;FO format] [&#x2F;NH]</span><br><span class="line"></span><br><span class="line">:: The following command will only fetch those processes whose memory is greater than 40MB</span><br><span class="line">TASKLIST &#x2F;FI &quot;memusage gt 40960&quot;</span><br></pre></td></tr></table></figure>

<p>/S                 specifies the remote system to connect to.<br>/U  [domain]user  specifies the user context under which the command should execute.<br>/P                 specifies the password for the given user context. Prompts for input if omitted.<br>/M                 list all tasks currently using the given exe/dll.<br>/SVC               display services hosted in each process.<br>/V                 display verbose task information.<br>/FI filter         tasks that match a given criteria specified by the filter.<br>/FO format         specifies the output format. Valid value: “TABLE”, “LIST”, “CSV”.<br>/NH                no header. Valid only for “TABLE” and “CSV” formats.</p>
<p><code>TASKKILL</code> command can kill a task from a windows command line by process id or image name.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">TASKKILL [&#x2F;S system [&#x2F;U username [&#x2F;P [password]]]] &#123; [&#x2F;FI filter] [&#x2F;PID processid | &#x2F;IM imagename] &#125; [&#x2F;T] [&#x2F;F]</span><br></pre></td></tr></table></figure>

<p>/T                  Terminates the specified process and any child processes which were started by it.<br>/F                  Forcefully</p>
<p><code>START</code> command can start a new process.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">START &quot;title&quot; [&#x2F;D path] [options] &quot;command&quot; [parameters]</span><br></pre></td></tr></table></figure>

<p>opotions:</p>
<p>/MIN            start window minimized<br>/MAX            start window maximized<br>/LOW            IDLE priority class<br>/NORMAL         NORMAL priority class<br>/ABOVENORMAL    ABOVENORMAL priority class<br>/BELOWNORMAL    BELOWNORMAL priority class<br>/HIGH           HIGH priority class<br>/REALTIME       REALTIME priority class</p>
<h2 id="Aliases"><a href="#Aliases" class="headerlink" title="Aliases"></a>Aliases</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DOSKEY [options] [macroname&#x3D;[text]]</span><br></pre></td></tr></table></figure>

<h2 id="Devices"><a href="#Devices" class="headerlink" title="Devices"></a>Devices</h2><p>Batch Script can work with devices attached to system. This is known as the <code>DevCon</code>(device console).exe.</p>
<p><code>DevCon</code> can verify that a driver is installed and configured correctly,<br>including proper INF files, driver stack, driver files, and driver package.<br>You can also use the DevCon commands(enable, disable, install, start, stop, and continue)<br>in scripts to test the driver.</p>
<h2 id="Registry"><a href="#Registry" class="headerlink" title="Registry"></a>Registry</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">:: Reading from the Registry</span><br><span class="line">:: REG QUERY</span><br><span class="line">REG QUERY [ROOT\]RegKey &#x2F;v ValueName [&#x2F;s]</span><br><span class="line">REG QUERY [ROOT\]RegKey &#x2F;ve -- This returns the (default) value</span><br><span class="line">REG QUERY HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Windows\</span><br><span class="line"></span><br><span class="line">:: Adding to the Registry</span><br><span class="line">REG ADD [ROOT\]RegKey &#x2F;v ValueName [&#x2F;t DataType] [&#x2F;S Separator] [&#x2F;d Data] [&#x2F;f]</span><br><span class="line">REG ADD [ROOT\]RegKey &#x2F;ve [&#x2F;d Data] [&#x2F;f]</span><br><span class="line"></span><br><span class="line">:: Deleting from the Registry</span><br><span class="line">REG DEL [ROOT\]RegKey &#x2F;v ValueName [&#x2F;f]</span><br><span class="line">REG DEL [ROOT\]RegKey &#x2F;ve [&#x2F;f]</span><br><span class="line">REG DEL [ROOT\]RegKey &#x2F;va [&#x2F;f]</span><br><span class="line"></span><br><span class="line">:: Copying from the registry</span><br><span class="line">REG COPY [\\SourceMachine\][ROOT\]RegKey [\\DestMachine][ROOT\]RegKey</span><br><span class="line">REG COPY HKEY_CURRENT_USER\Console HKEY_CURRENT_USER\Console\Test</span><br><span class="line">REG QUERY HKEY_CURRENT_USER\Console\Test</span><br><span class="line"></span><br><span class="line">:: Comparing Registry Keys</span><br><span class="line">REG COMP [ROOT\]RegKey [ROOT\]RegKey [&#x2F;v ValueName] [Output] [&#x2F;s]</span><br><span class="line">REG COMP [ROOT\]RegKey [ROOT\]RegKey [&#x2F;ve] [Output] [&#x2F;s]</span><br><span class="line">REG COMPARE HKEY_CURRENT_USER\Console HKEY_CURRENT_USER\Console\Test</span><br></pre></td></tr></table></figure>

<h2 id="Network"><a href="#Network" class="headerlink" title="Network"></a>Network</h2><p><code>Net</code> command is used to update, fix, or view the network or network settings.</p>
<h2 id="Printing"><a href="#Printing" class="headerlink" title="Printing"></a>Printing</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PRINT [&#x2F;D:device] [[drive:][path]filename[...]]</span><br></pre></td></tr></table></figure>

<h2 id="Debugging"><a href="#Debugging" class="headerlink" title="Debugging"></a>Debugging</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">:: REM out the @ECHO OFF</span><br><span class="line">:: Run the batch file with the required command line parameters,</span><br><span class="line">:: redirecting all output to a log file for later comparision.</span><br><span class="line"></span><br><span class="line">test.bat &gt; batch.log 2&gt;&amp;1</span><br></pre></td></tr></table></figure>

<p><code>TYPE</code> command can be used to output file contents.<br><code>ECHO</code> command can be used to insert marks.<br><code>Counter</code> can be used to help find out multiple calles to subroutine.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">:: Windows Versions</span><br><span class="line">IF NOT &quot;%OS%&quot;&#x3D;&#x3D;&quot;Windows_NT&quot; GOTO :DontRun</span><br><span class="line"></span><br><span class="line">:: Check for Windows NT 4</span><br><span class="line">VER | FIND &quot;Windows NT&quot; &gt; NUL &amp;&amp; GOTO :DontRun</span><br><span class="line"></span><br><span class="line">:: Check for Windows 2000</span><br><span class="line">VER | FIND &quot;Window 2000&quot; &gt; NUL &amp;&amp; GOTO :DontRun</span><br><span class="line"></span><br><span class="line">:: Actual Code here...</span><br><span class="line"></span><br><span class="line">EXIT</span><br><span class="line"></span><br><span class="line">:DontRun</span><br><span class="line">ECHO This batch file was written for Windows XP and later version only.</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://zerobit.ga/2020/09/24/windows/batch/" data-id="ckofhdl8z0014d0vvdob24pgf" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-math/matrix" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/09/17/math/matrix/" class="article-date">
  <time datetime="2020-09-16T16:00:00.000Z" itemprop="datePublished">2020-09-17</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Math/">Math</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/09/17/math/matrix/">Matrix</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Matrix"><a href="#Matrix" class="headerlink" title="Matrix"></a>Matrix</h2><p>A Matrix is an array of numbers:</p>
<p>[6  4 29]<br>[1 -9  8]</p>
<h2 id="Adding-Negative-Subtracting-Multiply-by-a-constant"><a href="#Adding-Negative-Subtracting-Multiply-by-a-constant" class="headerlink" title="Adding, Negative, Subtracting, Multiply by a constant"></a>Adding, Negative, Subtracting, Multiply by a constant</h2><p>To add two matrices: add the numbers in the matching positions.</p>
<p>[3  8] + [4  0] = [7  8]<br>[4  6]   [1 -9]   [5 -3]</p>
<p>To negative a matrix: negative the numbers in the matching positions.</p>
<p>-[2 -4] = [-2   4]<br> [7 10]   [-7 -10]</p>
<p>To subtract two matrices: subtract the numbers in the matching positions.</p>
<p>[3  8] - [4  0] = [-1  8]<br>[4  6]   [1 -9]   [ 3 15]</p>
<p>We can multiply a matrix by a constant. We call the constant a scalar,<br>so officially this is called “scalar multiplication”(标量乘法).</p>
<p>2 * [4  0] = [8   0]<br>    [1 -9]   [2 -18]</p>
<h2 id="Multiplying-by-another-Matrix"><a href="#Multiplying-by-another-Matrix" class="headerlink" title="Multiplying by another Matrix"></a>Multiplying by another Matrix</h2><p>To multiply two matrices together is a bit more difficult.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Result[r,c] &#x3D; M[r,1] * N[1,c] + M[r,2] * N[2,c] + ... + M[r,column_count] * N[row_count, c];</span><br></pre></td></tr></table></figure>

<p>[1  2  3] * [7   8] = [58  #]<br>[4  5  6]   [9  10]   [ #  #]<br>            [11 12]</p>
<p>row_count of Result is same to row_count of M.<br>column_count of Result is same to column_count of N.</p>
<h3 id="Identity-Matrix-单位矩阵"><a href="#Identity-Matrix-单位矩阵" class="headerlink" title="Identity Matrix(单位矩阵)"></a>Identity Matrix(单位矩阵)</h3><ul>
<li>It’s <code>square</code> which has same number of rows as columns.</li>
<li>It can be large or small (<code>2*2</code>, … , <code>100*100</code>).</li>
<li>It has <code>1s</code> on the main diagonal and <code>0s</code> everywhere else.</li>
<li>Its symbol is the capital letter <code>I</code>.</li>
</ul>
<p>It is a <code>special matrix</code>, because when we multiply by it, the original is unchanged:<br><code>A * I = A</code>; <code>I * A = A</code>;</p>
<h3 id="Order-of-multiplication"><a href="#Order-of-multiplication" class="headerlink" title="Order of multiplication"></a>Order of multiplication</h3><p>Matrix multiplication isn’t <code>commutative</code>.</p>
<h2 id="Dividing"><a href="#Dividing" class="headerlink" title="Dividing"></a>Dividing</h2><p>What about division? We don’t actually divide matrices, we do it by <code>multiply by an inverse</code>.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">                        -1</span><br><span class="line">A&#x2F;B &#x3D; A * (1&#x2F;B) &#x3D; A * B</span><br></pre></td></tr></table></figure>

<h2 id="Inverse-of-a-Matrix"><a href="#Inverse-of-a-Matrix" class="headerlink" title="Inverse of a Matrix"></a>Inverse of a Matrix</h2><p>When we multiply a matrix by its inverse we get the <code>Identity Matrix</code>. Sometimes there is no inverse at all.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">     -1</span><br><span class="line">A * A &#x3D; I</span><br><span class="line"></span><br><span class="line"> -1</span><br><span class="line">A * A &#x3D; I</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">      -1</span><br><span class="line">[a  b]   &#x3D; 1&#x2F;(ad-bc) * [ d  -b]</span><br><span class="line">[c  d]                 [-c   a]</span><br><span class="line"></span><br><span class="line">      -1</span><br><span class="line">[4  7]   &#x3D; 1&#x2F;(4*6-7*2)[6  -7] &#x3D; [ 0.6  -0.7]</span><br><span class="line">[2  6]                [-2  4]   [-0.2   0.4]</span><br></pre></td></tr></table></figure>

<p><code>swap</code> the a and d, <code>negative</code> b and c, and divide everything by the <code>determinant</code> of (ad-bc).</p>
<h3 id="The-Inverse-may-not-exist"><a href="#The-Inverse-may-not-exist" class="headerlink" title="The Inverse may not exist"></a>The Inverse may not exist</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">      -1</span><br><span class="line">[3  4]  &#x3D; 1&#x2F;(3*8-4*6)[ 8  -4] &#x3D; 1&#x2F;0[#  #]</span><br><span class="line">[6  8]               [-6   3]      [#  #]</span><br></pre></td></tr></table></figure>

<p>1/0 is undefined. Such matrix is called singular matrix(奇异矩阵).</p>
<h3 id="Bigger-Matrices"><a href="#Bigger-Matrices" class="headerlink" title="Bigger Matrices"></a>Bigger Matrices</h3><p>The inverse of a 2x2 is easy … compared to larger matrices (such as a 3x3, 4x4, etc).</p>
<p>For those larger matrices there are three main methods to work out the inverse:</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.mathsisfun.com/algebra/matrix-inverse-row-operations-gauss-jordan.html">Inverse of a Matrix using Elementary Row Operations (Gauss-Jordan)</a></li>
<li><a target="_blank" rel="noopener" href="https://www.mathsisfun.com/algebra/matrix-inverse-minors-cofactors-adjugate.html">Inverse of a Matrix using Minors, Cofactors and Adjugate</a></li>
</ul>
<h2 id="A-Real-Life-Exampple"><a href="#A-Real-Life-Exampple" class="headerlink" title="A Real Life Exampple"></a>A Real Life Exampple</h2><p><a target="_blank" rel="noopener" href="https://www.mathsisfun.com/algebra/matrix-inverse.html">A Real Life Example: Bus and Train</a></p>
<h2 id="Transposing-转置"><a href="#Transposing-转置" class="headerlink" title="Transposing(转置)"></a>Transposing(转置)</h2><p>To “transpose” a matrix, swap the rows and columns.<br>We put a “T” in the top right-hand corner to mean transpose:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">          T</span><br><span class="line">[6  4  24] &#x3D; [ 6  1]</span><br><span class="line">[1 -9   8]   [ 4 -9]</span><br><span class="line">             [24  8]</span><br></pre></td></tr></table></figure>

<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ol>
<li><a target="_blank" rel="noopener" href="https://www.mathsisfun.com/algebra/matrix-introduction.html">matrix-introduction</a></li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://zerobit.ga/2020/09/17/math/matrix/" data-id="ckofhdl8r000sd0vv28thbnc5" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-windows/uniquely_identify_a_windows_machine" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/09/16/windows/uniquely_identify_a_windows_machine/" class="article-date">
  <time datetime="2020-09-15T16:00:00.000Z" itemprop="datePublished">2020-09-16</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Windows/">Windows</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/09/16/windows/uniquely_identify_a_windows_machine/">Way to uniquely identify a windows machine</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="MAC-address"><a href="#MAC-address" class="headerlink" title="MAC address"></a>MAC address</h2><p>Using MAC address to identify a computer isn’t reliable. Because each computer can easily have multiple MAC address from multiple network adapters(Ethernet, Wi-Fi, Bluetooth, even virtual network adapters).</p>
<h2 id="wmic-csproduct-get-UUID"><a href="#wmic-csproduct-get-UUID" class="headerlink" title="wmic csproduct get UUID"></a>wmic csproduct get UUID</h2><p>That UUID is the best way to ID a machine, it exists in Windows, Mac and many other platforms. It is 32 characters in length, a universally unique identifier. You can run the above wmic command to get it.</p>
<p>But wait, that’s not always the case. Some of the motherboard vendors might not include this UUID in their motherboard, which is quite common on those non-OEM machines. In that case, when you use wmic trying to retrieve it you will get all FFFFFFFF-FFFF-FFFF-FFFF-FFFFFFFFFFFF as the ID back.</p>
<h2 id="Windows-Product-ID"><a href="#Windows-Product-ID" class="headerlink" title="Windows Product ID"></a>Windows Product ID</h2><p>Activation of Windows may change the value.</p>
<h2 id="Hard-Drive’s-serial-number"><a href="#Hard-Drive’s-serial-number" class="headerlink" title="Hard Drive’s serial number"></a>Hard Drive’s serial number</h2><p>Using the SN of the HD volume actually works, though when testing it on various systems, I’ve sometimes needed more privileges, so I stopped pursuing that path. It fails when running from (Linux) Live-OS.</p>
<h2 id="System-Identity-UniqueID"><a href="#System-Identity-UniqueID" class="headerlink" title="System.Identity.UniqueID"></a>System.Identity.UniqueID</h2><p><a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/windows/win32/properties/props-system-identity-uniqueid">System.Identity.UniqueID</a></p>
<p>not much infomations.</p>
<h2 id="CPUID"><a href="#CPUID" class="headerlink" title="CPUID"></a>CPUID</h2><p>CPUID isn’t unique. At least, not since last ~10 years. Intel deactivated that feature long ago. Usually some zero-ed string is returned, when someone tries to read the specific variable.</p>
<h2 id="HKEY-LOCAL-MACHINE-SOFTWARE-Microsoft-Cryptography-MachineGuid”"><a href="#HKEY-LOCAL-MACHINE-SOFTWARE-Microsoft-Cryptography-MachineGuid”" class="headerlink" title="HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Cryptography\MachineGuid”"></a>HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Cryptography\MachineGuid”</h2><p>MachineGuid is unique unless Windows is restored from a backup or clone.</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ol>
<li><a target="_blank" rel="noopener" href="https://www.nextofwindows.com/the-best-way-to-uniquely-identify-a-windows-machine">The Best Way To Uniquely Identify A Windows Machine</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/denisbrodbeck/machineid/issues/2">Error while getting machine id in Windows 10 #2</a></li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://zerobit.ga/2020/09/16/windows/uniquely_identify_a_windows_machine/" data-id="ckofhdl95001gd0vv9ypd8i0o" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-unicode/soft_hyphen" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/09/15/unicode/soft_hyphen/" class="article-date">
  <time datetime="2020-09-14T16:00:00.000Z" itemprop="datePublished">2020-09-15</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Unicode/">Unicode</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/09/15/unicode/soft_hyphen/">Soft Hyphen</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Unicode-Character-And-Encoding"><a href="#Unicode-Character-And-Encoding" class="headerlink" title="Unicode Character And Encoding"></a>Unicode Character And Encoding</h2><p>Unicode: U+00AD</p>
<p>HTML Entity(decimal): &amp;#173<br>HTML Entity(hex): &amp;#xad<br>HTML Entity(named): &amp;shy<br>How to type in Microsoft Windows: Alt+AD; Alt0173</p>
<p>UTF-8: 0xC2 0xAD (c2ad)<br>UTF-16: 0x00AD<br>UTF-32 0x000000AD<br>C/C++/Java source code: “\u00AD”<br>Python source code: u”\u00AD”</p>
<h2 id="Text-to-be-formatted-by-the-recipient"><a href="#Text-to-be-formatted-by-the-recipient" class="headerlink" title="Text to be formatted by the recipient"></a>Text to be formatted by the recipient</h2><p>The use of SHY characters in text that will be broken into lines by the recipient is the application context considered by the post-1999 HTML and Unicode specifications, as well as some word-processing file formats. In this context, the soft hyphen may also be called a discretionary hyphen or optional hyphen. It serves as an invisible marker used to specify a place in text where a hyphenated break is allowed without forcing a line break in an inconvenient place if the text is re-flowed. It becomes visible only after word wrapping at the end of a line. The soft hyphen’s Unicode semantics and HTML implementation are in many ways similar to Unicode’s zero-width space, with the exception that the soft hyphen will preserve the kerning of the characters on either side when not visible. The zero-width space, on the other hand, will not, as it is considered a visible character even if not rendered, thus having its own kerning metrics.</p>
<p>To show the effect of a soft hyphen in HTML, the words of the following text[4] have been separated with soft hyphens:</p>
<p>
    Margaret&shy;Are&shy;You&shy;Grieving&shy;Over&shy;Goldengrove&shy;Unleaving&shy;Leaves&shy;Like&shy;The&shy;Things&shy;Of&shy;Man&shy;You&shy;With&shy;Your&shy;Fresh&shy;Thoughts&shy;Care&shy;For&shy;Can&shy;You&shy;Ah&shy;As&shy;The&shy;Heart&shy;Grows&shy;Older&shy;It&shy;Will&shy;Come&shy;To&shy;Such&shy;Sights&shy;Colder&shy;By&shy;And&shy;By&shy;Nor&shy;Spare&shy;A&shy;Sigh&shy;Though&shy;Worlds&shy;Of&shy;Wanwood&shy;Leafmeal&shy;Lie&shy;And&shy;Yet&shy;You&shy;Will&shy;Weep&shy;And&shy;Know&shy;Why&shy;Now&shy;No&shy;Matter&shy;Child&shy;The&shy;Name&shy;Sorrows&shy;Springs&shy;Are&shy;The&shy;Same&shy;Nor&shy;Mouth&shy;Had&shy;No&shy;Nor&shy;Mind&shy;Expressed&shy;What&shy;Heart&shy;Heard&shy;Of&shy;Ghost&shy;Guessed&shy;It&shy;Is&shy;The&shy;Blight&shy;Man&shy;Was&shy;Born&shy;For&shy;It&shy;Is&shy;Margaret&shy;You&shy;Mourn&shy;For
</p>

<p>On HTML browsers supporting soft hyphens, resizing the window will re-break the above text only at word boundaries, and insert a hyphen at the end of each line.</p>
<h2 id="Text-preformatted-by-the-originator"><a href="#Text-preformatted-by-the-originator" class="headerlink" title="Text preformatted by the originator"></a>Text preformatted by the originator</h2><p>The SHY character is also used in text where paragraphs have already been broken into lines, such as certain plain text files, text sent to VT100-style terminal emulators or printers, or pages represented in page description languages. This is the application context originally considered by the EBCDIC and ISO 8859-1 standards and implemented in many VT100 terminal emulators.[1][2]</p>
<p>Here, SHY is a visible hyphen that is usually visually indistinguishable from a regular hyphen, but has been inserted solely for the purpose of line breaking. The purpose of the soft hyphen here is to distinguish it from any regular hyphen that might have been part of the original spelling of the word. This distinction helps re-use of already formatted text, when line breaks and soft hyphens inserted during word wrapping have to be removed to convert the text back into its unformatted form. For example, the copy or paste function of a terminal emulator can offer to replace line breaks with a space character, and remove any soft hyphens including any immediately following whitespace characters.</p>
<p>An example application that outputs soft hyphens for this reason is the groff text formatter as used on many Unix/Linux systems to display man pages.</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ol>
<li><a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Soft_hyphen">Soft hyphen</a></li>
<li><a target="_blank" rel="noopener" href="http://jkorpela.fi/shy.html">Soft hyphen (SHY) – a hard problem?</a></li>
<li><a target="_blank" rel="noopener" href="http://www.fileformat.info/info/unicode/char/ad/index.htm">Unicode Character ‘SOFT HYPHEN’ (U+00AD)</a></li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://zerobit.ga/2020/09/15/unicode/soft_hyphen/" data-id="ckofhdl8y0011d0vv0ay90keo" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-network/transport_layer" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/09/09/network/transport_layer/" class="article-date">
  <time datetime="2020-09-08T16:00:00.000Z" itemprop="datePublished">2020-09-09</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Network/">Network</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/09/09/network/transport_layer/">Protocol</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="IPv4"><a href="#IPv4" class="headerlink" title="IPv4"></a>IPv4</h2><p>Internet Protocol version 4. IPv4, which we often denote as just IP, has been the<br>workhorse protocol of the IP suite since the early 1980s. It uses 32-bit<br>addresses (Section A.4). IPv4 provides packet delivery service for TCP, UDP,<br>SCTP, ICMP, and IGMP.</p>
<h2 id="IPv6"><a href="#IPv6" class="headerlink" title="IPv6"></a>IPv6</h2><p>Internet Protocol version 6. IPv6 was designed in the mid-1990s as a replace-<br>ment for IPv4. The major change is a larger address comprising 128 bits (Sec-<br>tion A.5), to deal with the explosive growth of the Internet in the 1990s. IPv6<br>provides packet delivery service for TCP, UDP, SCTP, and ICMPv6.<br>We often use the word ‘‘IP’’ as an adjective, as in IP layer and IP address, when<br>the distinction between IPv4 and IPv6 is not needed.</p>
<h2 id="TCP"><a href="#TCP" class="headerlink" title="TCP"></a>TCP</h2><p>Transmission Control Protocol. TCP is a connection-oriented protocol that pro-<br>vides a reliable, full-duplex byte stream to its users. TCP sockets are an<br>example of stream sockets. TCP takes care of details such as acknowledg-<br>ments, timeouts, retransmissions, and the like. Most Internet application pro-<br>grams use TCP. Notice that TCP can use either IPv4 or IPv6.</p>
<h2 id="UDP"><a href="#UDP" class="headerlink" title="UDP"></a>UDP</h2><p>User Datagram Protocol. UDP is a connectionless protocol, and UDP sockets<br>are an example of datagram sockets. There is no guarantee that UDP data-<br>grams ever reach their intended destination. As with TCP, UDP can use<br>either IPv4 or IPv6.</p>
<h2 id="SCTP"><a href="#SCTP" class="headerlink" title="SCTP"></a>SCTP</h2><p>Stream Control Transmission Protocol. SCTP is a connection-oriented protocol<br>that provides a reliable full-duplex association. The word ‘‘association’’ is used<br>when referring to a connection in SCTP because SCTP is multihomed, involv-<br>ing a set of IP addresses and a single port for each side of an association.<br>SCTP provides a message service, which maintains record boundaries. As<br>with TCP and UDP, SCTP can use either IPv4 or IPv6, but it can also use both<br>IPv4 and IPv6 simultaneously on the same association.</p>
<h2 id="ICMP"><a href="#ICMP" class="headerlink" title="ICMP"></a>ICMP</h2><p>Internet Control Message Protocol. ICMP handles error and control information<br>between routers and hosts. These messages are normally generated by and<br>processed by the TCP/IP networking software itself, not user processes,<br>although we show the ping and traceroute programs, which use ICMP.<br>We sometimes refer to this protocol as ICMPv4 to distinguish it from<br>ICMPv6.</p>
<h2 id="IGMP"><a href="#IGMP" class="headerlink" title="IGMP"></a>IGMP</h2><p>Internet Group Management Protocol. IGMP is used with multicasting (Chap-<br>ter 21), which is optional with IPv4.</p>
<h2 id="ARP"><a href="#ARP" class="headerlink" title="ARP"></a>ARP</h2><p>Address Resolution Protocol. ARP maps an IPv4 address into a hardware<br>address (such as an Ethernet address). ARP is normally used on broadcast<br>networks such as Ethernet, token ring, and FDDI, and is not needed on point-<br>to-point networks.</p>
<h2 id="RARP"><a href="#RARP" class="headerlink" title="RARP"></a>RARP</h2><p>Reverse Address Resolution Protocol. RARP maps a hardware address into an<br>IPv4 address. It is sometimes used when a diskless node is booting.</p>
<h2 id="ICMPv6"><a href="#ICMPv6" class="headerlink" title="ICMPv6"></a>ICMPv6</h2><p>Internet Control Message Protocol version 6. ICMPv6 combines the functionality<br>of ICMPv4, IGMP, and ARP.</p>
<h2 id="BPF"><a href="#BPF" class="headerlink" title="BPF"></a>BPF</h2><p>BSD packet filter. This interface provides access to the datalink layer. It is nor-<br>mally found on Berkeley-derived kernels.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://zerobit.ga/2020/09/09/network/transport_layer/" data-id="ckofhdl8w0010d0vv47631txa" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/2/">Next &amp;raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/CEF/">CEF</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/CPP/">CPP</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Chromium/">Chromium</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Frontend/">Frontend</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Math/">Math</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Network/">Network</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Unicode/">Unicode</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Windows/">Windows</a></li></ul>
    </div>
  </div>


  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">April 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">March 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">February 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">November 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">October 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">September 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2000/01/">January 2000</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/04/30/cpp/effective_modern_cpp/">Effective Modern CPP</a>
          </li>
        
          <li>
            <a href="/2021/03/18/cpp/modern_cpp/">Modern CPP</a>
          </li>
        
          <li>
            <a href="/2021/02/20/windows/memory_leak/">Memory Leak</a>
          </li>
        
          <li>
            <a href="/2020/11/20/fontend/typescript/">TypeScript</a>
          </li>
        
          <li>
            <a href="/2020/10/10/network/tcp_ip_osi_model/">TCP/IP vs OSI Model</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2021 dayo<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>